(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8294:function(e,s,t){Promise.resolve().then(t.bind(t,4104))},4104:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return I}});var a=t(7437),r=t(2265),l=t(4660),i=t(4810);let n={DAY_TIME_BUDGET:8,TILE_DRIVE_TIME:.1,BASE_SCOOP_TIME:.2,STARTING_CASH:1e3,FUEL_COST_PER_TILE:2,SUPPLIES_COST_PER_JOB:5,WORKER_DAILY_WAGE:50,SATISFACTION_SERVICED:2,SATISFACTION_MISSED:-4,CHURN_THRESHOLD:0,AUTO_ROUTE_IMPROVEMENT:.15,BASE_LEAD_CHANCE:.1,MARKETING_LEAD_BONUS:.05},c={SMALL:{name:"Small House",basePrice:25,maxDirtiness:3,frequency:"weekly",color:"#4ade80",size:1},MEDIUM:{name:"Medium House",basePrice:45,maxDirtiness:4,frequency:"weekly",color:"#fbbf24",size:1.2},LARGE:{name:"Large House",basePrice:75,maxDirtiness:5,frequency:"biweekly",color:"#f97316",size:1.5}},d={BAG_CAPACITY:"bag_capacity",WALKING_SPEED:"walking_speed",VAN_SPEED:"van_speed",ROUTE_PLANNER:"route_planner",MARKETING:"marketing",WORKER:"worker",PREMIUM_ADDON:"premium_addon"},o={[d.BAG_CAPACITY]:{name:"Bag Capacity",description:"Reduces supplies cost per job",baseCost:500,costMultiplier:1.5,maxLevel:5,effect:e=>Math.max(.5,1-.1*e),effectDescription:e=>"Supplies cost: ".concat(Math.round((1-Math.max(.5,1-.1*e))*100),"% off")},[d.WALKING_SPEED]:{name:"Walking Speed",description:"Reduces time spent at each house",baseCost:300,costMultiplier:1.4,maxLevel:5,effect:e=>Math.max(.5,1-.1*e),effectDescription:e=>"Scoop time: ".concat(Math.round((1-Math.max(.5,1-.1*e))*100),"% faster")},[d.VAN_SPEED]:{name:"Van Speed",description:"Reduces driving time between houses",baseCost:400,costMultiplier:1.6,maxLevel:5,effect:e=>Math.max(.6,1-.08*e),effectDescription:e=>"Drive time: ".concat(Math.round((1-Math.max(.6,1-.08*e))*100),"% faster")},[d.ROUTE_PLANNER]:{name:"Route Planner+",description:"Better route optimization",baseCost:800,costMultiplier:2,maxLevel:3,effect:e=>1-.05*e,effectDescription:e=>"Route distance: ".concat(Math.round(5*e),"% shorter")},[d.MARKETING]:{name:"Marketing",description:"Increases chance of new leads",baseCost:600,costMultiplier:1.8,maxLevel:5,effect:e=>.05*e,effectDescription:e=>"Lead chance: +".concat(Math.round(5*e),"%")},[d.WORKER]:{name:"Hire Worker",description:"Doubles daily capacity",baseCost:2e3,costMultiplier:1,maxLevel:1,effect:e=>2*e,effectDescription:e=>"Daily capacity: ".concat(2*e,"x")},[d.PREMIUM_ADDON]:{name:"Premium Add-on",description:"Some houses upgrade to higher pricing",baseCost:1500,costMultiplier:1,maxLevel:1,effect:e=>.3*e,effectDescription:e=>"Upgrade chance: ".concat(30*e,"%")}},x={GRID_WIDTH:20,GRID_HEIGHT:12,ROAD_WIDTH:2,LOT_SIZE:3,STARTING_HOUSES:20,MAX_HOUSES:50},m={SCOOP_PROGRESS_TIME:2e3},u={day:1,cash:n.STARTING_CASH,timeLeft:n.DAY_TIME_BUDGET,isDayActive:!1,currentRoute:null,houses:[],selectedHouses:[],dailyCapacity:8,upgrades:{},totalRevenue:0,totalExpenses:0,totalProfit:0,housesServiced:0,housesMissed:0,weather:"clear",events:[],dailyEarnings:0,totalCustomers:0,customerSatisfaction:75,dayNumber:1,weeklyStats:{revenue:0,expenses:0,profit:0,newCustomers:0,churnedCustomers:0,retentionRate:100,averageRating:4},customers:[]},h=(0,l.Ue)()((0,i.tJ)((e,s)=>({...u,startDay:()=>{let t=s();0!==t.selectedHouses.length&&e({isDayActive:!0,timeLeft:n.DAY_TIME_BUDGET,currentRoute:{houses:t.selectedHouses,projectedRevenue:0,projectedTime:0,projectedFuel:0}})},endDay:()=>{let t=s(),{houses:a,selectedHouses:r,upgrades:l,weather:i}=t,c=0,o=0,x=0,m=0;r.forEach(e=>{let s=a.find(s=>s.id===e);if(s){if(t.timeLeft>0){let e=s.basePrice*(1+.1*s.dirtiness);s.isPremium&&(e*=1.5);let a=l[d.BAG_CAPACITY]||0,r=n.SUPPLIES_COST_PER_JOB*(1-.1*a);c+=e,o+=r,x++,s.satisfaction+=n.SATISFACTION_SERVICED,s.lastServiced=t.day,s.serviced=!0}else m++,s.satisfaction+=n.SATISFACTION_MISSED}});let u=n.FUEL_COST_PER_TILE*(2*r.length);o+=u,l[d.WORKER]&&(o+=n.WORKER_DAILY_WAGE),"rain"===i&&(o*=1.2);let h=c-o,g=a.reduce((e,s)=>e+s.satisfaction,0),p=a.length>0?g/a.length:75,b=Math.floor((t.day-1)/7),j=Math.floor(t.day/7),f=t.weeklyStats;f=j>b?{revenue:c,expenses:o,profit:h,newCustomers:0,churnedCustomers:0,retentionRate:100,averageRating:p/20}:{...f,revenue:f.revenue+c,expenses:f.expenses+o,profit:f.profit+h,averageRating:(f.averageRating+p/20)/2},e({day:t.day+1,cash:t.cash+h,isDayActive:!1,currentRoute:null,selectedHouses:[],totalRevenue:t.totalRevenue+c,totalExpenses:t.totalExpenses+o,totalProfit:t.totalProfit+h,housesServiced:t.housesServiced+x,housesMissed:t.housesMissed+m,timeLeft:0,dailyEarnings:c,totalCustomers:a.length,customerSatisfaction:Math.max(0,Math.min(100,p)),dayNumber:t.day+1,weeklyStats:f}),s().processChurnAndLeads()},selectHouse:t=>{let a=s();!(a.selectedHouses.length>=a.dailyCapacity)&&(a.selectedHouses.includes(t)||e({selectedHouses:[...a.selectedHouses,t]}))},deselectHouse:t=>{e({selectedHouses:s().selectedHouses.filter(e=>e!==t)})},autoPlanRoute:()=>{let t=s(),a=t.houses.filter(e=>!t.selectedHouses.includes(e.id)).map(e=>({...e,profitPerTime:e.basePrice/(.1*e.dirtiness+1)})).sort((e,s)=>s.profitPerTime-e.profitPerTime).slice(0,t.dailyCapacity-t.selectedHouses.length);e({selectedHouses:[...t.selectedHouses,...a.map(e=>e.id)]})},serviceHouse:e=>{let t=s();if(!t.isDayActive||!t.currentRoute)return},purchaseUpgrade:t=>{let a=s(),r=o[t];if(!r)return;let l=a.upgrades[t]||0;if(l>=r.maxLevel)return;let i=r.baseCost*Math.pow(r.costMultiplier,l);if(a.cash<i)return;let n={cash:a.cash-i,upgrades:{...a.upgrades,[t]:l+1}};t===d.WORKER&&(n.dailyCapacity=2*a.dailyCapacity),e(n)},resetGame:()=>{e(u)},saveGame:()=>{},loadGame:()=>{},processChurnAndLeads:()=>{let{houses:t,upgrades:a,day:r}=s(),l=t.filter(e=>!(e.satisfaction<n.CHURN_THRESHOLD)),i=a[d.MARKETING]||0;Math.random()<n.BASE_LEAD_CHANCE+i*n.MARKETING_LEAD_BONUS&&(l.length,x.MAX_HOUSES),e({houses:l})},updateCustomerService:(t,a)=>{e({customers:s().customers.map(e=>e.id===t?{...e,nextService:a}:e)})},addCustomerNote:(t,a)=>{e({customers:s().customers.map(e=>e.id===t?{...e,notes:a}:e)})},churnCustomer:t=>{e({customers:s().customers.map(e=>e.id===t?{...e,status:"churned"}:e)})}}),{name:"poopster-game-state",partialize:e=>({day:e.day,cash:e.cash,houses:e.houses,upgrades:e.upgrades,totalRevenue:e.totalRevenue,totalExpenses:e.totalExpenses,totalProfit:e.totalProfit,housesServiced:e.housesServiced,housesMissed:e.housesMissed})}));function g(){let e=[],{GRID_WIDTH:s,GRID_HEIGHT:t,ROAD_WIDTH:a,LOT_SIZE:r,STARTING_HOUSES:l}=x,i=new Set;for(let e=a;e<t;e+=r+a)for(let t=0;t<s;t++)i.add("".concat(t,",").concat(e));for(let e=a;e<s;e+=r+a)for(let s=0;s<t;s++)i.add("".concat(e,",").concat(s));let n=[];for(let e=0;e<t;e++)for(let l=0;l<s;l++){let c=!1;for(let s=0;s<a;s++){for(let t=0;t<a;t++)if(i.has("".concat(l+t,",").concat(e+s))){c=!0;break}if(c)break}let d=!1;for(let s=0;s<r;s++){for(let t=0;t<r;t++)if(i.has("".concat(l+t,",").concat(e+s))){d=!0;break}if(d)break}!c&&!d&&l+r/2<s&&e+r/2<t&&n.push({x:Math.floor(l+r/2),y:Math.floor(e+r/2)})}let d=n.sort(()=>Math.random()-.5);for(let s=0;s<Math.min(l,d.length);s++){let t=d[s],a=function(e,s,t){let a;let r=Math.sqrt(Math.pow(e-x.GRID_WIDTH/2,2)+Math.pow(s-x.GRID_HEIGHT/2,2)),l=c[a=r<3?"LARGE":r<6?"MEDIUM":"SMALL"].maxDirtiness,i=("MEDIUM"===a||"LARGE"===a)&&.1>Math.random();return{id:"house_".concat(t),x:e,y:s,tier:a,basePrice:c[a].basePrice,dirtiness:Math.floor(Math.random()*l)+1,frequency:.7>Math.random()?"weekly":"biweekly",lastServiced:0,satisfaction:Math.floor(3*Math.random())+2,isPremium:i}}(t.x,t.y,s);e.push(a)}return e}function p(e,s,t,a){return Math.sqrt(Math.pow(t-e,2)+Math.pow(a-s,2))}function b(e,s){if(0===s.length)return{points:[],totalDistance:0,totalTime:0,totalRevenue:0,totalFuel:0};let t=e.filter(e=>s.includes(e.id)),a=[],r=[...t],l=0,i=0,c=0,d=r[0],o=p(10,6,d.x,d.y);for(let e of r){let s=p(10,6,e.x,e.y);s<o&&(o=s,d=e)}let x=r.findIndex(e=>e.id===d.id);for(r.splice(x,1),a.push({houseId:d.id,x:d.x,y:d.y,estimatedTime:0,estimatedRevenue:d.basePrice*(1+.1*d.dirtiness)}),l=d.x,i=d.y;r.length>0;){let e=r[0],s=p(l,i,e.x,e.y);for(let t of r){let a=p(l,i,t.x,t.y);a<s&&(s=a,e=t)}a.push({houseId:e.id,x:e.x,y:e.y,estimatedTime:0,estimatedRevenue:e.basePrice*(1+.1*e.dirtiness)}),c+=s,l=e.x,i=e.y;let t=r.findIndex(s=>s.id===e.id);r.splice(t,1)}let m=0,u=0;for(let e=0;e<a.length;e++){let s=a[e],t=0;if(e>0){let r=a[e-1];t=p(r.x,r.y,s.x,s.y)*n.TILE_DRIVE_TIME}let r=n.BASE_SCOOP_TIME;s.estimatedTime=t+r,m+=s.estimatedTime,u+=s.estimatedRevenue}let h=1-n.AUTO_ROUTE_IMPROVEMENT;c*=h,m*=h;let g=c*n.FUEL_COST_PER_TILE;return{points:a,totalDistance:c,totalTime:m,totalRevenue:u,totalFuel:g}}var j=t(2461),f=t(6375);function v(){let e=(0,r.useRef)(null),s=(0,r.useRef)(null),t=(0,r.useRef)(null),l=(0,r.useRef)(null),i=(0,r.useRef)(null),n=(0,r.useRef)([]),c=(0,r.useRef)([]),d=(0,r.useRef)(),[o,x]=(0,r.useState)({x:0,z:0,speed:.15,isMoving:!1,currentHouse:null,inBackyard:!1}),[m,u]=(0,r.useState)(new Set),[g,p]=(0,r.useState)(0),[b,v]=(0,r.useState)(0),[y,N]=(0,r.useState)("Walk to houses and press S to scoop poops!"),[D,w]=(0,r.useState)(!1),{houses:S,selectedHouses:C,isDayActive:E,currentRoute:M}=h(),k=S.map((e,s)=>({id:e.id,tier:e.tier,streetX:(s-S.length/2)*8,streetZ:-15,backyardX:(s-S.length/2)*8,backyardZ:-8,poops:Array.from({length:Math.floor(3*Math.random())+1},(s,t)=>({id:"poop_".concat(e.id,"_").concat(t),x:(Math.random()-.5)*4,z:(Math.random()-.5)*4,size:.5>Math.random()?"small":.8>Math.random()?"medium":"large",scooped:!1}))}));(0,r.useEffect)(()=>{if(!e.current)return;let a=new j.xsS;a.background=new j.Ilk(8900331),s.current=a,e.current.clientWidth,e.current.clientHeight;let r=new j.iKG(-25,25,20,-20,.1,1e3);r.position.set(0,0,15),r.lookAt(0,0,0),l.current=r;let o=new f.CP7({antialias:!0});o.setSize(e.current.clientWidth,e.current.clientHeight),o.shadowMap.enabled=!0,o.shadowMap.type=j.ntZ,e.current.appendChild(o.domElement),t.current=o;let x=new j.Mig(16777215,.7);a.add(x);let m=new j.Ox3(16777215,.8);m.position.set(10,10,5),m.castShadow=!0,m.shadow.mapSize.width=2048,m.shadow.mapSize.height=2048,a.add(m);let u=new j._12(50,40),h=new j.YBo({color:4868682}),g=new j.Kj0(u,h);g.rotation.x=-Math.PI/2,g.receiveShadow=!0,a.add(g);let p=new j.Kj0(new j._12(50,.5),new j.YBo({color:16776960}));p.rotation.x=-Math.PI/2,p.position.set(0,.01,-15),a.add(p),k.forEach((e,s)=>{let t=new j.DvJ(3,2,3),r="LARGE"===e.tier?16739125:"MEDIUM"===e.tier?16767293:7065471,l=new j.YBo({color:r}),i=new j.Kj0(t,l);i.position.set(e.streetX,1,e.streetZ),i.castShadow=!0,i.receiveShadow=!0,i.userData={id:e.id,tier:e.tier,isSelected:C.includes(e.id),houseData:e},n.current.push(i),a.add(i);let d=new j._12(6,6),o=new j.YBo({color:2263842,transparent:!0,opacity:.8}),x=new j.Kj0(d,o);x.rotation.x=-Math.PI/2,x.position.set(e.backyardX,.01,e.backyardZ),a.add(x);let m=new j.DvJ(6,1,.2),u=new j.YBo({color:9127187}),h=new j.Kj0(m,u);h.position.set(e.backyardX,.5,e.backyardZ-3),a.add(h);let g=new j.Kj0(m,u);g.position.set(e.backyardX,.5,e.backyardZ+3),a.add(g);let p=new j.Kj0(new j.DvJ(.2,1,6),u);p.position.set(e.backyardX-3,.5,e.backyardZ),a.add(p);let b=new j.Kj0(new j.DvJ(.2,1,6),u);b.position.set(e.backyardX+3,.5,e.backyardZ),a.add(b),e.poops.forEach((s,t)=>{let r=new j.xo$("small"===s.size?.3:"medium"===s.size?.4:.5),l=new j.YBo({color:9127187}),i=new j.Kj0(r,l);i.position.set(e.backyardX+s.x,.3,e.backyardZ+s.z),i.castShadow=!0,i.userData={poopId:s.id,size:s.size,scooped:!1,houseId:e.id},c.current.push(i),a.add(i)})});let b=new j.fHI(.4,.4,1.5,8),v=new j.YBo({color:4286945}),y=new j.Kj0(b,v);y.position.set(0,.75,0),y.castShadow=!0,a.add(y),i.current=y;let N=()=>{if(d.current=requestAnimationFrame(N),A(),R(),l.current&&i.current){let e=i.current.position.x,s=i.current.position.z;l.current.position.x=e,l.current.position.z=s+15}o.render(a,r)};return N(),()=>{d.current&&cancelAnimationFrame(d.current),e.current&&o.domElement&&e.current.removeChild(o.domElement),o.dispose()}},[S,C]),(0,r.useEffect)(()=>{let e=e=>{u(s=>new Set(s).add(e.key.toLowerCase()))},s=e=>{u(s=>{let t=new Set(s);return t.delete(e.key.toLowerCase()),t})};return window.addEventListener("keydown",e),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",s)}},[]);let A=()=>{if(!i.current)return;let e=o.x,s=o.z,t=!1,a=o.currentHouse,r=o.inBackyard;(m.has("w")||m.has("arrowup"))&&(s-=o.speed,t=!0),(m.has("s")||m.has("arrowdown"))&&(s+=o.speed,t=!0),(m.has("a")||m.has("arrowleft"))&&(e-=o.speed,t=!0),(m.has("d")||m.has("arrowright"))&&(e+=o.speed,t=!0),k.forEach(t=>{if(3>Math.sqrt(Math.pow(e-t.streetX,2)+Math.pow(s-t.streetZ,2))&&(a=t.id,r=!1,N("At ".concat(t.tier," house. Walk to the backyard to scoop poops!"))),3>Math.sqrt(Math.pow(e-t.backyardX,2)+Math.pow(s-t.backyardZ,2))){a=t.id,r=!0;let e=t.poops.filter(e=>!e.scooped).length;N("In ".concat(t.tier," house backyard. ").concat(e," poops available. Press S to scoop!"))}}),e=Math.max(-22,Math.min(22,e)),s=Math.max(-18,Math.min(18,s)),t?(x(t=>({...t,x:e,z:s,isMoving:!0,currentHouse:a,inBackyard:r})),i.current.position.set(e,.75,s)):x(e=>({...e,isMoving:!1}))},R=()=>{if(i.current&&o.inBackyard&&o.currentHouse&&m.has("s")){let e=i.current.position;c.current.forEach(t=>{if(!t.userData.scooped&&t.userData.houseId===o.currentHouse&&2>e.distanceTo(t.position)){t.userData.scooped=!0,t.visible=!1;let e="small"===t.userData.size?10:"medium"===t.userData.size?25:50;p(s=>s+e),v(e=>e+1),N("Scooped ".concat(t.userData.size," poop! +").concat(e," points!")),T(t.position),setTimeout(()=>{if(t&&s.current){t.userData.scooped=!1,t.visible=!0;let e=k.find(e=>e.id===o.currentHouse);e&&t.position.set(e.backyardX+(Math.random()-.5)*4,.3,e.backyardZ+(Math.random()-.5)*4)}},8e3+12e3*Math.random())}})}},T=e=>{if(!s.current)return;let t=new j.woe(new j.u9r,new j.UY4({color:9127187,size:.2,transparent:!0,opacity:.8})),a=new Float32Array(45);for(let s=0;s<15;s++)a[3*s]=e.x+(Math.random()-.5)*3,a[3*s+1]=e.y+2*Math.random(),a[3*s+2]=e.z+(Math.random()-.5)*3;t.geometry.setAttribute("position",new j.TlE(a,3)),t.position.copy(e),s.current.add(t),setTimeout(()=>{s.current&&(s.current.remove(t),t.geometry.dispose(),t.material.dispose())},1500)};return(0,r.useEffect)(()=>{let s=()=>{if(!e.current||!t.current||!l.current)return;let s=e.current.clientWidth,a=e.current.clientHeight;t.current.setSize(s,a);let r=s/a;l.current.left=-25*r,l.current.right=25*r,l.current.updateProjectionMatrix()};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),(0,r.useEffect)(()=>{let e=e=>{"Tab"===e.key&&(e.preventDefault(),w(e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,a.jsxs)("div",{className:"w-full h-full relative",children:[(0,a.jsx)("div",{ref:e,className:"w-full h-full"}),D&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-black bg-opacity-70 text-white p-4 rounded-lg border border-gray-600",children:[(0,a.jsx)("h3",{className:"font-bold mb-3 text-lg",children:"\uD83C\uDFAE Controls"}),(0,a.jsxs)("div",{className:"text-sm space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"bg-blue-600 px-2 py-1 rounded text-xs",children:"WASD"}),(0,a.jsx)("span",{children:"Move around"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"bg-green-600 px-2 py-1 rounded text-xs",children:"S"}),(0,a.jsx)("span",{children:"Scoop poop (when in backyard)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"bg-purple-600 px-2 py-1 rounded text-xs",children:"TAB"}),(0,a.jsx)("span",{children:"Toggle this UI"})]})]})]}),(0,a.jsx)("div",{className:"absolute top-4 right-4 bg-black bg-opacity-70 text-white p-4 rounded-lg border border-gray-600",children:(0,a.jsxs)("div",{className:"text-sm space-y-2",children:[(0,a.jsxs)("div",{className:"font-bold text-yellow-400 text-lg",children:["\uD83C\uDFC6 Score: ",g]}),(0,a.jsxs)("div",{children:["\uD83D\uDCA9 Poops Scooped: ",b]}),(0,a.jsxs)("div",{children:["\uD83D\uDCCD Position: (",o.x.toFixed(1),", ",o.z.toFixed(1),")"]}),(0,a.jsxs)("div",{children:["\uD83C\uDFE0 House: ",o.currentHouse||"None"]}),(0,a.jsxs)("div",{children:["\uD83C\uDF33 Backyard: ",o.inBackyard?"Yes":"No"]})]})})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-white p-3 rounded-lg border border-gray-600 max-w-md text-center",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:y}),(0,a.jsx)("div",{className:"text-xs text-gray-300 mt-1",children:"Press TAB to toggle UI"})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 bg-black bg-opacity-70 text-white p-3 rounded-lg border border-gray-600",children:[(0,a.jsx)("div",{className:"text-xs font-bold mb-2",children:"\uD83D\uDDFA️ Minimap"}),(0,a.jsxs)("div",{className:"w-32 h-24 bg-gray-800 rounded border border-gray-600 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute w-2 h-2 bg-blue-500 rounded-full",style:{left:"".concat((o.x+22)/44*100,"%"),top:"".concat((o.z+18)/36*100,"%")}}),k.map((e,s)=>(0,a.jsx)("div",{className:"absolute w-1.5 h-1.5 bg-red-500 rounded-full",style:{left:"".concat((e.streetX+22)/44*100,"%"),top:"".concat((e.streetZ+18)/36*100,"%")}},e.id))]})]})]})}function y(e){let{onStartDay:s,canStartDay:t}=e,{houses:r,selectedHouses:l,dailyCapacity:i,selectHouse:n,deselectHouse:d,autoPlanRoute:o}=h(),x=l.length>0?b(r,l):null,m=x?{houses:x.points.length,distance:Math.round(10*x.totalDistance)/10,time:Math.round(10*x.totalTime)/10,revenue:Math.round(x.totalRevenue),fuel:Math.round(x.totalFuel)}:null,u=[...r].sort((e,s)=>{if(l.includes(e.id)&&!l.includes(s.id))return -1;if(!l.includes(e.id)&&l.includes(s.id))return 1;let t=e.basePrice*(1+.1*e.dirtiness);return s.basePrice*(1+.1*s.dirtiness)-t}),g=e=>{l.includes(e)?d(e):l.length<i&&n(e)},p=e=>l.includes(e.id)?"selected":l.length>=i?"disabled":"available",j=e=>e>=5?"text-green-600":e>=2?"text-yellow-600":"text-red-600",f=e=>e>=5?"Excellent":e>=2?"Good":e>=0?"Fair":"Poor";return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Plan Your Route"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[l.length,"/",i," houses selected"]})]}),(0,a.jsx)("button",{onClick:()=>{o()},disabled:l.length>=i,className:"w-full game-button-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDE80 Auto-Plan Route"}),m&&(0,a.jsxs)("div",{className:"game-card bg-blue-50 border-blue-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Route Projection"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Houses:"}),(0,a.jsx)("span",{className:"font-medium",children:m.houses})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Revenue:"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:["$",m.revenue]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Time:"}),(0,a.jsxs)("span",{className:"font-medium",children:[m.time,"h"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Fuel:"}),(0,a.jsxs)("span",{className:"font-medium text-red-600",children:["$",m.fuel]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Available Houses"}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2",children:u.map(e=>{let s=p(e),t=l.includes(e.id),r=e.basePrice*(1+.1*e.dirtiness);return(0,a.jsx)("div",{className:"game-card cursor-pointer transition-all ".concat(t?"ring-2 ring-primary-500 bg-primary-50":"hover:bg-gray-50"," ").concat("disabled"===s?"opacity-50 cursor-not-allowed":""),onClick:()=>g(e.id),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded border-2 flex items-center justify-center ".concat(t?"bg-primary-500 border-primary-500":"border-gray-300"),children:t&&(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat("#4ade80"===c[e.tier].color?"text-green-600":"#fbbf24"===c[e.tier].color?"text-yellow-600":"text-orange-600"),children:c[e.tier].name}),e.isPremium&&(0,a.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full",children:"⭐ Premium"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Dirtiness: ",e.dirtiness,"/5 • ",e.frequency]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-semibold text-green-600",children:["$",Math.round(r)]}),(0,a.jsx)("div",{className:"text-xs ".concat(j(e.satisfaction)),children:f(e.satisfaction)})]})]})},e.id)})})]}),(0,a.jsx)("button",{onClick:s,disabled:!t,className:"w-full game-button text-lg py-4 disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDE97 Start Day"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsx)("div",{children:"\uD83D\uDCA1 Select houses to create your daily route"}),(0,a.jsx)("div",{children:"\uD83D\uDCA1 Higher dirtiness = more revenue"}),(0,a.jsx)("div",{children:"\uD83D\uDCA1 Premium houses pay 50% more"}),(0,a.jsx)("div",{children:"\uD83D\uDCA1 Keep customers happy to avoid churn"})]})]})}function N(e){let{onEndDay:s,canEndDay:t}=e,{currentRoute:l,houses:i,timeLeft:n,isDayActive:c,weather:d}=h(),[o,x]=(0,r.useState)(0),[u,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(0),[j,f]=(0,r.useState)([]),v=l&&l.houses[o]?i.find(e=>e.id===l.houses[o]):null;(0,r.useEffect)(()=>{if(!c)return;let e=setInterval(()=>{h.setState(e=>({timeLeft:Math.max(0,e.timeLeft-.1)}))},1e3);return()=>clearInterval(e)},[c]);let y=()=>{v&&(f(e=>[...e,v.id]),o<((null==l?void 0:l.houses.length)||0)-1&&x(e=>e+1),g(!1),b(0))},N=l?j.length/l.houses.length*100:0;return c&&l?(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"game-card bg-blue-50 border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-800",children:"Route Progress"}),(0,a.jsxs)("div",{className:"text-sm text-blue-600",children:[(()=>{switch(d){case"rain":return"\uD83C\uDF27️";case"heat":return"\uD83D\uDD25";default:return"☀️"}})()," ",d]})]}),(0,a.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(N,"%")}})}),(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:[j.length," of ",l.houses.length," houses completed"]})]}),v&&(0,a.jsxs)("div",{className:"game-card bg-green-50 border-green-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"Current House"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-green-700",children:"Type:"}),(0,a.jsx)("span",{className:"font-medium",children:v.tier})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-green-700",children:"Dirtiness:"}),(0,a.jsxs)("span",{className:"font-medium",children:[v.dirtiness,"/5"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-green-700",children:"Revenue:"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:["$",Math.round(v.basePrice*(1+.1*v.dirtiness))]})]})]})]}),v&&!j.includes(v.id)&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:()=>{if(!v||u)return;g(!0),b(0);let e=m.SCOOP_PROGRESS_TIME,s=setInterval(()=>{b(t=>{let a=t+100/(e/50);return a>=100?(clearInterval(s),y(),100):a})},50)},disabled:u,className:"w-full game-button text-lg py-4 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"\uD83D\uDD04 Scooping...":"\uD83D\uDCA9 Scoop This House!"}),u&&(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-primary-500 h-3 rounded-full transition-all duration-100",style:{width:"".concat(p,"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Route Queue"}),(0,a.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-1",children:l.houses.map((e,s)=>{let t=i.find(s=>s.id===e);if(!t)return null;let r=j.includes(e),l=s===o;return(0,a.jsxs)("div",{className:"p-2 rounded-lg text-sm ".concat(r?"bg-green-100 text-green-800":l?"bg-blue-100 text-blue-800 ring-2 ring-blue-300":"bg-gray-100 text-gray-600"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"font-medium",children:[s+1,". ",t.tier," House"]}),(0,a.jsx)("span",{className:"text-xs",children:r?"✅":l?"\uD83D\uDD04":"⏳"})]}),l&&(0,a.jsxs)("div",{className:"text-xs mt-1",children:["Dirtiness: ",t.dirtiness,"/5 • Revenue: $",Math.round(t.basePrice*(1+.1*t.dirtiness))]})]},e)})})]}),(0,a.jsxs)("div",{className:"game-card bg-yellow-50 border-yellow-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"text-yellow-800",children:[(0,a.jsx)("div",{className:"text-sm",children:"Time Remaining"}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[n.toFixed(1),"h"]})]}),(0,a.jsxs)("div",{className:"text-right text-yellow-700",children:[(0,a.jsx)("div",{className:"text-sm",children:"Route Status"}),(0,a.jsxs)("div",{className:"text-lg font-semibold",children:[N.toFixed(0),"% Complete"]})]})]}),(0,a.jsx)("button",{onClick:s,disabled:!t,className:"w-full game-button-secondary text-lg py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83C\uDFC1 End Day"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsx)("div",{children:'\uD83D\uDCA1 Tap "Scoop" when you arrive at each house'}),(0,a.jsx)("div",{children:"\uD83D\uDCA1 Keep an eye on your time budget"}),(0,a.jsx)("div",{children:"\uD83D\uDCA1 Weather affects your efficiency"}),(0,a.jsx)("div",{children:"\uD83D\uDCA1 Complete all houses for maximum profit"})]})]}):(0,a.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDE97"}),(0,a.jsx)("div",{children:"No active route"}),(0,a.jsx)("div",{className:"text-sm",children:"Go to Plan tab to start your day"})]})}function D(){let{cash:e,upgrades:s,purchaseUpgrade:t}=h(),r=e=>{t(e)},l=e=>{let t=o[e];if(!t)return 0;let a=s[e]||0;return Math.round(t.baseCost*Math.pow(t.costMultiplier,a))},i=s=>e>=l(s),n=e=>{let t=o[e];return!t||(s[e]||0)>=t.maxLevel},c=e=>n(e)?"maxed":i(e)?"available":"unaffordable",x=e=>({[d.BAG_CAPACITY]:"\uD83D\uDC5C",[d.WALKING_SPEED]:"\uD83D\uDEB6",[d.VAN_SPEED]:"\uD83D\uDE90",[d.ROUTE_PLANNER]:"\uD83D\uDDFA️",[d.MARKETING]:"\uD83D\uDCE2",[d.WORKER]:"\uD83D\uDC77",[d.PREMIUM_ADDON]:"⭐"})[e]||"\uD83D\uDD27";return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Upgrades & Improvements"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["$",e.toLocaleString()," available"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(o).map(e=>{let[t,i]=e,n=s[t]||0,d=l(t),o=c(t);return(0,a.jsxs)("div",{className:"game-card transition-all ".concat("maxed"===o?"bg-green-50 border-green-200":"available"===o?"hover:shadow-lg":"opacity-75"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:x(t)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:i.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Level ",n,"/",i.maxLevel]})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:i.description}),n>0&&(0,a.jsx)("div",{className:"text-sm text-green-700 mb-2",children:i.effectDescription(n)}),n<i.maxLevel&&(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:["Next level: ",i.effectDescription(n+1)]})]}),(0,a.jsx)("div",{className:"text-right ml-4",children:"maxed"===o?(0,a.jsx)("div",{className:"text-green-600 font-semibold text-sm",children:"MAXED OUT"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-800 mb-2",children:["$",d.toLocaleString()]}),(0,a.jsx)("button",{onClick:()=>r(t),disabled:"unaffordable"===o,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("available"===o?"bg-primary-500 hover:bg-primary-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"available"===o?"Purchase":"Not Enough Cash"})]})})]}),i.maxLevel>1&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[n,"/",i.maxLevel]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(n/i.maxLevel*100,"%")}})})]})]},t)})}),(0,a.jsxs)("div",{className:"game-card bg-blue-50 border-blue-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCA1 Upgrade Strategy"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,a.jsx)("div",{children:"• Start with Bag Capacity to reduce costs"}),(0,a.jsx)("div",{children:"• Van Speed improves route efficiency"}),(0,a.jsx)("div",{children:"• Marketing brings in new customers"}),(0,a.jsx)("div",{children:"• Workers double your daily capacity"}),(0,a.jsx)("div",{children:"• Premium Add-on increases high-tier revenue"})]})]}),(0,a.jsxs)("div",{className:"game-card bg-gray-50 border-gray-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Current Upgrades"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(o).map(e=>{let[t,r]=e,l=s[t]||0;return 0===l?null:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:[r.name,":"]}),(0,a.jsxs)("span",{className:"font-medium",children:["Level ",l]})]},t)})})]})]})}function w(){var e,s,t;let{cash:l,dailyEarnings:i,totalCustomers:n,customerSatisfaction:c,dayNumber:d,weeklyStats:o}=h(),[x,m]=(0,r.useState)("day"),u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),g=e=>"".concat(Math.round(e),"%");return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Business Statistics"}),(0,a.jsx)("div",{className:"flex space-x-2",children:["day","week","month"].map(e=>(0,a.jsx)("button",{onClick:()=>m(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(x===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"game-card bg-green-50 border-green-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCB0"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-700",children:u(l)}),(0,a.jsx)("div",{className:"text-xs text-green-600",children:"Available Cash"})]})}),(0,a.jsx)("div",{className:"game-card bg-blue-50 border-blue-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCC8"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-700",children:u(i||0)}),(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"Today's Earnings"})]})}),(0,a.jsx)("div",{className:"game-card bg-purple-50 border-purple-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83C\uDFE0"}),(0,a.jsx)("div",{className:"text-lg font-bold text-purple-700",children:n||0}),(0,a.jsx)("div",{className:"text-xs text-purple-600",children:"Total Customers"})]})}),(0,a.jsx)("div",{className:"game-card bg-orange-50 border-orange-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:(s=c||0)>=80?"\uD83D\uDE0A":s>=60?"\uD83D\uDE10":"\uD83D\uDE1E"}),(0,a.jsx)("div",{className:"text-lg font-bold ".concat((t=c||0)>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600"),children:g(c||0)}),(0,a.jsx)("div",{className:"text-xs text-orange-600",children:"Satisfaction"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Business Performance"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Day:"}),(0,a.jsx)("span",{className:"font-medium",children:d||1})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Weekly Revenue:"}),(0,a.jsx)("span",{className:"font-medium",children:u((null==o?void 0:o.revenue)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Weekly Expenses:"}),(0,a.jsx)("span",{className:"font-medium",children:u((null==o?void 0:o.expenses)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Weekly Profit:"}),(0,a.jsx)("span",{className:"font-medium ".concat(((null==o?void 0:o.profit)||0)>=0?"text-green-600":"text-red-600"),children:u((null==o?void 0:o.profit)||0)})]})]})]}),(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Customer Insights"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"New This Week:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==o?void 0:o.newCustomers)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Churned This Week:"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:(null==o?void 0:o.churnedCustomers)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Retention Rate:"}),(0,a.jsx)("span",{className:"font-medium",children:g((null==o?void 0:o.retentionRate)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Avg. Rating:"}),(0,a.jsxs)("span",{className:"font-medium",children:["⭐ ",(null==o?void 0:null===(e=o.averageRating)||void 0===e?void 0:e.toFixed(1))||"N/A"]})]})]})]})]}),(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Business Growth"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Customer Base"}),(0,a.jsxs)("span",{className:"font-medium",children:[n||0," / 100"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min((n||0)/100*100,100),"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Satisfaction Goal"}),(0,a.jsxs)("span",{className:"font-medium",children:[c||0,"% / 90%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min((c||0)/90*100,100),"%")}})})]})]})]})]})}function S(){var e;let{cash:s,dailyEarnings:t,weeklyStats:l}=h(),[i,n]=(0,r.useState)("week"),[c,d]=(0,r.useState)("profit"),o=[{date:"2024-01-01",revenue:1200,expenses:800,profit:400,customers:15},{date:"2024-01-02",revenue:1350,expenses:750,profit:600,customers:18},{date:"2024-01-03",revenue:1100,expenses:700,profit:400,customers:16},{date:"2024-01-04",revenue:1600,expenses:900,profit:700,customers:22},{date:"2024-01-05",revenue:1400,expenses:850,profit:550,customers:19},{date:"2024-01-06",revenue:1800,expenses:950,profit:850,customers:25},{date:"2024-01-07",revenue:1300,expenses:800,profit:500,customers:17}],x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),m=e=>"".concat(Math.round(e),"%"),u=(()=>{switch(i){case"week":default:return o.slice(-7);case"month":case"quarter":return o}})(),g=u.reduce((e,s)=>e+s.revenue,0),p=u.reduce((e,s)=>e+s.expenses,0),b=g-p,j=Math.round(u.reduce((e,s)=>e+s.customers,0)/u.length),f=g>0?b/g*100:0;return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Financial Dashboard"}),(0,a.jsx)("div",{className:"flex space-x-2",children:["week","month","quarter"].map(e=>(0,a.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(i===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"game-card bg-green-50 border-green-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCB0"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-700",children:x(g)}),(0,a.jsx)("div",{className:"text-xs text-green-600",children:"Total Revenue"})]})}),(0,a.jsx)("div",{className:"game-card bg-red-50 border-red-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCB8"}),(0,a.jsx)("div",{className:"text-lg font-bold text-red-700",children:x(p)}),(0,a.jsx)("div",{className:"text-xs text-red-600",children:"Total Expenses"})]})}),(0,a.jsx)("div",{className:"game-card bg-blue-50 border-blue-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCC8"}),(0,a.jsx)("div",{className:"text-lg font-bold ".concat(b>=0?"text-blue-700":"text-red-700"),children:x(b)}),(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"Net Profit"})]})}),(0,a.jsx)("div",{className:"game-card bg-purple-50 border-purple-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{className:"text-lg font-bold ".concat(f>=0?"text-purple-700":"text-red-700"),children:m(f)}),(0,a.jsx)("div",{className:"text-xs text-purple-600",children:"Profit Margin"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Revenue vs Expenses"}),(0,a.jsx)("div",{className:"space-y-2",children:u.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 w-16",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,a.jsxs)("div",{className:"flex-1 flex space-x-1",children:[(0,a.jsx)("div",{className:"bg-green-500 h-4 rounded-l",style:{width:"".concat(e.revenue/Math.max(...u.map(e=>e.revenue))*100,"%")}}),(0,a.jsx)("div",{className:"bg-red-500 h-4 rounded-r",style:{width:"".concat(e.expenses/Math.max(...u.map(e=>e.expenses))*100,"%")}})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 w-20 text-right",children:x(e.revenue)})]},s))}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4 mt-3 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,a.jsx)("span",{children:"Revenue"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,a.jsx)("span",{children:"Expenses"})]})]})]}),(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Profit Trend"}),(0,a.jsx)("div",{className:"space-y-2",children:u.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 w-16",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-4 rounded transition-all ".concat(e.profit>=0?"bg-blue-500":"bg-red-500"),style:{width:"".concat(Math.abs(e.profit)/Math.max(...u.map(e=>Math.abs(e.profit)))*100,"%")}}),(0,a.jsx)("span",{className:"text-xs font-medium ".concat(e.profit>=0?"text-blue-600":"text-red-600"),children:x(e.profit)})]})})]},s))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Revenue Breakdown"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Small Houses"}),(0,a.jsx)("span",{className:"font-medium",children:x(.4*g)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Medium Houses"}),(0,a.jsx)("span",{className:"font-medium",children:x(.35*g)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Large Houses"}),(0,a.jsx)("span",{className:"font-medium",children:x(.25*g)})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Total Revenue"}),(0,a.jsx)("span",{className:"font-bold text-green-600",children:x(g)})]})})]})]}),(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Expense Breakdown"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Fuel Costs"}),(0,a.jsx)("span",{className:"font-medium",children:x(.3*p)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Supplies"}),(0,a.jsx)("span",{className:"font-medium",children:x(.25*p)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Worker Wages"}),(0,a.jsx)("span",{className:"font-medium",children:x(.35*p)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Other"}),(0,a.jsx)("span",{className:"font-medium",children:x(.1*p)})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Total Expenses"}),(0,a.jsx)("span",{className:"font-bold text-red-600",children:x(p)})]})})]})]})]}),(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Financial Insights"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg. Daily Revenue"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-600",children:x(Math.round(g/u.length))})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83C\uDFAF"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Revenue per Customer"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:x(Math.round(g/j))})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCC8"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Growth Rate"}),(0,a.jsx)("div",{className:"text-lg font-bold text-purple-600",children:m(0==(e=.9*g)?0:(g-e)/e*100)})]})]})]}),(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsx)("button",{className:"px-3 py-2 text-sm bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"\uD83D\uDCCA Export Report"}),(0,a.jsx)("button",{className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"\uD83D\uDCB0 Set Budget"}),(0,a.jsx)("button",{className:"px-3 py-2 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:"\uD83D\uDCC8 Forecast"}),(0,a.jsx)("button",{className:"px-3 py-2 text-sm bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",children:"\uD83D\uDD0D Analyze"})]})]})]})}function C(){var e;let{customers:s,updateCustomerService:t,addCustomerNote:l,churnCustomer:i}=h(),[n,d]=(0,r.useState)(null),[o,x]=(0,r.useState)("all"),[m,u]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),b=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"pending":return"text-blue-600 bg-blue-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},j=e=>{switch(e){case"active":return"✅";case"pending":return"⏳";case"overdue":return"\uD83D\uDEA8";case"churned":return"❌";default:return"❓"}},f=e=>{switch(e){case"SMALL":default:return"\uD83C\uDFE0";case"MEDIUM":return"\uD83C\uDFD8️";case"LARGE":return"\uD83C\uDFF0"}},v=e=>e?new Date(e).toLocaleDateString():"Never",y=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600",N=(null==s?void 0:s.filter(e=>{let s="all"===o||e.status===o,t=e.name.toLowerCase().includes(m.toLowerCase())||e.address.toLowerCase().includes(m.toLowerCase());return s&&t}))||[],D=(e,s)=>{null==t||t(e,s)},w=e=>{g.trim()&&(null==l||l(e,g),p(""))},S=e=>{confirm("Are you sure you want to mark this customer as churned?")&&(null==i||i(e))};return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Customer Management"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[N.length," customers"]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",placeholder:"Search customers by name or address...",value:m,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,a.jsx)("div",{className:"flex space-x-2",children:["all","active","pending","overdue","churned"].map(e=>(0,a.jsx)("button",{onClick:()=>x(e),className:"px-3 py-2 text-sm rounded-md transition-colors ".concat(o===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:N.map(e=>(0,a.jsxs)("div",{onClick:()=>d(e),className:"game-card cursor-pointer transition-all hover:shadow-md ".concat((null==n?void 0:n.id)===e.id?"ring-2 ring-blue-500":""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:f(e.tier)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.address})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(b(e.status)),children:[(0,a.jsx)("span",{className:"mr-1",children:j(e.status)}),e.status]}),(0,a.jsxs)("div",{className:"text-sm mt-1 ".concat(y(e.satisfaction)),children:[e.satisfaction,"% satisfaction"]})]})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Last: ",v(e.lastService)]}),(0,a.jsx)("span",{className:"mx-2",children:"•"}),(0,a.jsxs)("span",{children:["Next: ",v(e.nextService)]})]})]},e.id))})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:n?(0,a.jsxs)("div",{className:"game-card space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:f(n.tier)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:n.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.address})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"House Tier"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:null===(e=c[n.tier])||void 0===e?void 0:e.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Status"}),(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(b(n.status)),children:[(0,a.jsx)("span",{className:"mr-1",children:j(n.status)}),n.status]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Satisfaction"}),(0,a.jsxs)("div",{className:"text-sm ".concat(y(n.satisfaction)),children:[n.satisfaction,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Service"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:v(n.lastService)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Service"}),(0,a.jsx)("input",{type:"date",value:n.nextService?n.nextService.split("T")[0]:"",onChange:e=>D(n.id,e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add Note"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:g,onChange:e=>p(e.target.value),placeholder:"Add a note...",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:()=>w(n.id),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Add"})]})]}),n.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:n.notes})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsx)("button",{onClick:()=>S(n.id),className:"w-full px-3 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Mark as Churned"})})]})]}):(0,a.jsx)("div",{className:"game-card text-center text-gray-500 py-8",children:"Select a customer to view details"})})]}),(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsx)("button",{className:"px-3 py-2 text-sm bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"\uD83D\uDCC5 Schedule All"}),(0,a.jsx)("button",{className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"\uD83D\uDCCA Export Data"}),(0,a.jsx)("button",{className:"px-3 py-2 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:"\uD83D\uDCE7 Send Reminders"}),(0,a.jsx)("button",{className:"px-3 py-2 text-sm bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",children:"\uD83C\uDFAF Find Prospects"})]})]})]})}function E(){var e;let[s,t]=(0,r.useState)("stats"),l=[{id:"stats",name:"Statistics",icon:"\uD83D\uDCCA",component:w},{id:"financial",name:"Financial",icon:"\uD83D\uDCB0",component:S},{id:"customers",name:"Customers",icon:"\uD83D\uDC65",component:C}],i=(null===(e=l.find(e=>e.id===s))||void 0===e?void 0:e.component)||w;return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(e=>(0,a.jsxs)("button",{onClick:()=>t(e.id),className:"flex items-center space-x-2 px-4 py-3 text-sm font-medium transition-colors ".concat(s===e.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"text-lg",children:e.icon}),(0,a.jsx)("span",{children:e.name})]},e.id))}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)(i,{})})]})}function M(){let[e,s]=(0,r.useState)("audio"),[t,l]=(0,r.useState)({audio:{masterVolume:80,musicVolume:70,sfxVolume:90,enableMusic:!0,enableSFX:!0},gameplay:{autoSave:!0,autoSaveInterval:5,showTutorials:!0,difficulty:"normal",timeScale:1},display:{theme:"auto",fontSize:"medium",showAnimations:!0,showNotifications:!0},business:{startingCash:1e3,customerSatisfactionThreshold:60,maxCustomers:100,enableEvents:!0}}),i=(e,s,t)=>{l(a=>({...a,[e]:{...a[e],[s]:t}}))};return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Game Settings"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{confirm("Are you sure you want to reset all settings to defaults?")&&l({audio:{masterVolume:80,musicVolume:70,sfxVolume:90,enableMusic:!0,enableSFX:!0},gameplay:{autoSave:!0,autoSaveInterval:5,showTutorials:!0,difficulty:"normal",timeScale:1},display:{theme:"auto",fontSize:"medium",showAnimations:!0,showNotifications:!0},business:{startingCash:1e3,customerSatisfactionThreshold:60,maxCustomers:100,enableEvents:!0}})},className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Reset to Defaults"}),(0,a.jsx)("button",{onClick:()=>{localStorage.setItem("poopsterGameSettings",JSON.stringify(t)),alert("Settings saved successfully!")},className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Save Settings"})]})]}),(0,a.jsx)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[{id:"audio",name:"Audio",icon:"\uD83D\uDD0A"},{id:"gameplay",name:"Gameplay",icon:"\uD83C\uDFAE"},{id:"display",name:"Display",icon:"\uD83C\uDFA8"},{id:"business",name:"Business",icon:"\uD83D\uDCBC"}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-colors ".concat(e===t.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[(0,a.jsx)("span",{className:"text-lg",children:t.icon}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t.name})]},t.id))}),(0,a.jsxs)("div",{className:"game-card",children:["audio"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Audio Settings"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Master Volume"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t.audio.masterVolume,"%"]})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:t.audio.masterVolume,onChange:e=>i("audio","masterVolume",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Music Volume"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t.audio.musicVolume,"%"]})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:t.audio.musicVolume,onChange:e=>i("audio","musicVolume",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:!t.audio.enableMusic})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sound Effects Volume"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t.audio.sfxVolume,"%"]})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:t.audio.sfxVolume,onChange:e=>i("audio","sfxVolume",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:!t.audio.enableSFX})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.audio.enableMusic,onChange:e=>i("audio","enableMusic",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Enable Music"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.audio.enableSFX,onChange:e=>i("audio","enableSFX",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Enable Sound Effects"})]})]})]}),"gameplay"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Gameplay Settings"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Game Difficulty"}),(0,a.jsxs)("select",{value:t.gameplay.difficulty,onChange:e=>i("gameplay","difficulty",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"easy",children:"Easy - More forgiving, slower progression"}),(0,a.jsx)("option",{value:"normal",children:"Normal - Balanced challenge"}),(0,a.jsx)("option",{value:"hard",children:"Hard - Challenging, faster progression"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Game Speed"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t.gameplay.timeScale,"x"]})]}),(0,a.jsx)("input",{type:"range",min:"0.5",max:"3",step:"0.5",value:t.gameplay.timeScale,onChange:e=>i("gameplay","timeScale",parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.gameplay.autoSave,onChange:e=>i("gameplay","autoSave",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Enable Auto-Save"})]}),t.gameplay.autoSave&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto-Save Interval (minutes)"}),(0,a.jsxs)("select",{value:t.gameplay.autoSaveInterval,onChange:e=>i("gameplay","autoSaveInterval",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"1",children:"Every minute"}),(0,a.jsx)("option",{value:"5",children:"Every 5 minutes"}),(0,a.jsx)("option",{value:"10",children:"Every 10 minutes"}),(0,a.jsx)("option",{value:"30",children:"Every 30 minutes"})]})]})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.gameplay.showTutorials,onChange:e=>i("gameplay","showTutorials",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Show Tutorials and Tips"})]})]}),"display"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Display Settings"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,a.jsxs)("select",{value:t.display.theme,onChange:e=>i("display","theme",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"light",children:"Light Theme"}),(0,a.jsx)("option",{value:"dark",children:"Dark Theme"}),(0,a.jsx)("option",{value:"auto",children:"Auto (Follow System)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,a.jsxs)("select",{value:t.display.fontSize,onChange:e=>i("display","fontSize",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"small",children:"Small"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"large",children:"Large"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.display.showAnimations,onChange:e=>i("display","showAnimations",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Show Animations"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.display.showNotifications,onChange:e=>i("display","showNotifications",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Show Notifications"})]})]})]}),"business"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Business Settings"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Cash"}),(0,a.jsx)("input",{type:"number",min:"500",max:"10000",step:"100",value:t.business.startingCash,onChange:e=>i("business","startingCash",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Amount of money you start with"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Customer Satisfaction Threshold"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t.business.customerSatisfactionThreshold,"%"]})]}),(0,a.jsx)("input",{type:"range",min:"30",max:"90",value:t.business.customerSatisfactionThreshold,onChange:e=>i("business","customerSatisfactionThreshold",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum satisfaction to retain customers"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Customers"}),(0,a.jsx)("input",{type:"number",min:"20",max:"500",step:"10",value:t.business.maxCustomers,onChange:e=>i("business","maxCustomers",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of customers you can serve"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.business.enableEvents,onChange:e=>i("business","enableEvents",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Enable Random Events"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Weather, special requests, and other random events"})]})]}),(0,a.jsxs)("div",{className:"game-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Additional Options"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 text-sm bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"\uD83D\uDCC1 Export Save Data"}),(0,a.jsx)("button",{className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"\uD83D\uDCE5 Import Save Data"}),(0,a.jsx)("button",{className:"px-4 py-2 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:"\uD83C\uDFAF Reset Progress"}),(0,a.jsx)("button",{className:"px-4 py-2 text-sm bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",children:"\uD83D\uDCCA View Statistics"})]})]})]})}function k(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[o,x]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=[{id:"1",type:"success",title:"Customer Acquired!",message:'New customer "Smith Family" has signed up for weekly service.',timestamp:new Date(Date.now()-3e5),read:!1,action:{label:"View Customer",onClick:()=>console.log("View customer clicked")}},{id:"2",type:"warning",title:"Low Supplies",message:"You are running low on cleaning supplies. Consider restocking soon.",timestamp:new Date(Date.now()-18e5),read:!1,action:{label:"Buy Supplies",onClick:()=>console.log("Buy supplies clicked")}},{id:"3",type:"info",title:"Daily Summary",message:"You completed 15 jobs today with 95% customer satisfaction.",timestamp:new Date(Date.now()-72e5),read:!0}],t=[{id:"1",type:"weather",title:"Rainy Weather",description:"Heavy rain expected today. Service times may be longer.",icon:"\uD83C\uDF27️",severity:"medium",timestamp:new Date},{id:"2",type:"customer",title:"Special Request",description:'Customer "Johnson" requests extra attention to their garden area.',icon:"\uD83C\uDFAF",severity:"low",timestamp:new Date(Date.now()-9e5)},{id:"3",type:"achievement",title:"Milestone Reached!",description:"Congratulations! You've served 100 customers.",icon:"\uD83C\uDFC6",severity:"high",timestamp:new Date(Date.now()-27e5)}];s(e),l(t),x(e.filter(e=>!e.read).length)},[]);let m=e=>{s(s=>s.map(s=>s.id===e?{...s,read:!0}:s)),x(e=>Math.max(0,e-1))},u=t=>{s(e=>e.filter(e=>e.id!==t)),x(s=>{let a=e.find(e=>e.id===t);return a&&!a.read?Math.max(0,s-1):s})},h=e=>{switch(e){case"success":return"✅";case"warning":return"⚠️";case"error":return"❌";case"info":return"ℹ️";case"event":return"\uD83C\uDF89";default:return"\uD83D\uDCE2"}},g=e=>{switch(e){case"success":return"border-green-200 bg-green-50";case"warning":return"border-yellow-200 bg-yellow-50";case"error":return"border-red-200 bg-red-50";case"info":return"border-blue-200 bg-blue-50";case"event":return"border-purple-200 bg-purple-50";default:return"border-gray-200 bg-gray-50"}},p=e=>{switch(e){case"low":return"border-green-200 bg-green-50";case"medium":return"border-yellow-200 bg-yellow-50";case"high":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}},b=e=>{let s=new Date().getTime()-e.getTime(),t=Math.floor(s/6e4),a=Math.floor(s/36e5);return t<1?"Just now":t<60?"".concat(t,"m ago"):a<24?"".concat(a,"h ago"):"".concat(Math.floor(s/864e5),"d ago")};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>n(!i),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD14"}),o>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:o>99?"99+":o})]}),i&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Notifications"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{s(e=>e.map(e=>({...e,read:!0}))),x(0)},className:"text-xs text-blue-600 hover:text-blue-800",children:"Mark all read"}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"text-xs text-gray-500 hover:text-gray-700",children:"✕"})]})]})}),(0,a.jsx)("div",{className:"p-2",children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDD15"}),(0,a.jsx)("p",{children:"No notifications"})]}):(0,a.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat(g(e.type)," ").concat(e.read?"":"ring-2 ring-blue-300"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:h(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 text-sm",children:e.title}),(0,a.jsx)("button",{onClick:()=>u(e.id),className:"text-gray-400 hover:text-gray-600 text-xs",children:"✕"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:b(e.timestamp)}),e.action&&(0,a.jsx)("button",{onClick:()=>{var s;null===(s=e.action)||void 0===s||s.onClick(),m(e.id)},className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:e.action.label})]})]})]})},e.id))})})]})]}),(0,a.jsx)("button",{onClick:()=>d(!c),className:"ml-2 p-2 text-gray-600 hover:text-gray-800 transition-colors",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC5"})}),c&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Game Events"}),(0,a.jsx)("button",{onClick:()=>d(!1),className:"text-xs text-gray-500 hover:text-gray-700",children:"✕"})]})}),(0,a.jsx)("div",{className:"p-2",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCC5"}),(0,a.jsx)("p",{children:"No active events"})]}):(0,a.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat(p(e.severity)),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 text-sm",children:e.title}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("high"===e.severity?"bg-red-100 text-red-800":"medium"===e.severity?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.severity})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"text-xs text-gray-500",children:b(e.timestamp)})})]})]})},e.id))})})]}),(i||c)&&(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>{n(!1),d(!1)}})]})}function A(e){var s,t;let{onClose:r}=e,{day:l,cash:i,dailyEarnings:n,totalCustomers:c,customerSatisfaction:d,houses:o}=h(),x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["Day ",l," Complete!"]}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("span",{className:"text-2xl",children:"\xd7"})})]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Great work today! Here's your summary:"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCB0"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-700",children:x(n||0)}),(0,a.jsx)("div",{className:"text-xs text-green-600",children:"Today's Earnings"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83C\uDFE0"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-700",children:o.filter(e=>e.serviced).length}),(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"Houses Serviced"})]})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:(s=d||0)>=80?"\uD83D\uDE0A":s>=60?"\uD83D\uDE10":"\uD83D\uDE1E"}),(0,a.jsxs)("div",{className:"text-xl font-bold ".concat((t=d||0)>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600"),children:["".concat(Math.round(d||0),"%")," Satisfaction"]}),(0,a.jsx)("div",{className:"text-sm text-orange-600 mt-1",children:d>=80?"Excellent work!":d>=60?"Good job!":"Room for improvement"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Customers:"}),(0,a.jsx)("span",{className:"font-medium",children:c||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Current Cash:"}),(0,a.jsx)("span",{className:"font-bold text-green-600",children:x(i)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Day Number:"}),(0,a.jsx)("span",{className:"font-medium",children:l})]})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDFAF"}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:1===l?"Great start to your poopster empire!":l<7?"You're building momentum!":l<30?"You're becoming a poopster pro!":"You're a poopster legend!"})]})]}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,a.jsx)("button",{onClick:r,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Continue to Next Day"})})]})})}function R(){let[e,s]=(0,r.useState)("plan"),[t,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1),{day:c,cash:d,timeLeft:o,isDayActive:x,houses:m,selectedHouses:u,dailyCapacity:p,startDay:j,endDay:f,resetGame:w,customers:S}=h();(0,r.useEffect)(()=>{if(0===m.length){let e=g();h.setState({houses:e})}},[m.length]),(0,r.useEffect)(()=>{if(0===S.length){let e=function(){let e=["Smith Family","Johnson Residence","Williams Home","Brown House","Davis Family","Miller Residence","Wilson Home","Moore House","Taylor Family","Anderson Residence","Thomas Home","Jackson House","White Family","Harris Residence","Martin Home","Thompson House","Garcia Family","Martinez Residence","Robinson Home","Clark House"],s=["Oak Street","Maple Avenue","Pine Road","Elm Street","Cedar Lane","Birch Drive","Willow Way","Cherry Street","Magnolia Avenue","Sycamore Road","Poplar Street","Hickory Lane","Walnut Drive","Chestnut Way","Ash Street","Beech Avenue","Spruce Road","Fir Street","Hemlock Lane","Cypress Drive"],t=[];for(let a=0;a<Math.min(20,e.length);a++){let r=.3>Math.random()?"LARGE":.5>Math.random()?"MEDIUM":"SMALL",l=Math.floor(40*Math.random())+60,i=.8>Math.random()?"active":.5>Math.random()?"pending":"overdue",n=new Date,c=new Date(n.getTime()-2592e6*Math.random()),d=new Date(n.getTime()+12096e5*Math.random());t.push({id:"customer_".concat(a),name:e[a],address:"".concat(Math.floor(9999*Math.random())+1," ").concat(s[a]),tier:r,lastService:c.toISOString(),nextService:d.toISOString(),satisfaction:l,status:i,notes:.3>Math.random()?"Special attention to garden area":""})}return t}();h.setState({customers:e})}},[S.length]),(0,r.useEffect)(()=>{if(c>1&&!x){let e=function(){let e=Math.random();return e<.7?"clear":e<.85?"rain":"heat"}();h.setState({weather:e})}},[c,x]);let C=u.length>0?b(m,u):null;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,a.jsxs)("div",{className:"bg-white shadow-lg border-b border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-game text-primary-600",children:"Poopster"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Day ",c]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["$",d.toLocaleString()]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Cash"})]}),x&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[Math.max(0,o).toFixed(1),"h"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Time Left"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[u.length,"/",p]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Route"})]}),(0,a.jsx)(k,{})]})]}),C&&!x&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Route Preview:"}),(0,a.jsxs)("div",{className:"flex space-x-4 text-blue-700",children:[(0,a.jsxs)("span",{children:["Revenue: $",C.totalRevenue]}),(0,a.jsxs)("span",{children:["Time: ",C.totalTime.toFixed(1),"h"]}),(0,a.jsxs)("span",{children:["Fuel: $",Math.round(C.totalFuel)]})]})]})})]}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(v,{}),(0,a.jsx)("button",{onClick:()=>n(!0),className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow-lg transition-colors z-10",children:"\uD83D\uDCCB Show Dashboard"})]}),(0,a.jsx)("div",{className:"bg-white border-t border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:()=>{if(confirm("Are you sure you want to reset your game? This cannot be undone.")){w();let e=g();h.setState({houses:e})}},className:"text-sm text-gray-500 hover:text-red-600 transition-colors",children:"Reset Game"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Poopster v1.0 - Build your poop empire!"})]})}),t&&(0,a.jsx)(A,{onClose:()=>l(!1)}),i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Game Dashboard"}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("span",{className:"text-2xl",children:"\xd7"})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex border-b border-gray-200 bg-gray-50 mb-6",children:[{id:"plan",name:"Plan",icon:"\uD83D\uDCCB"},{id:"route",name:"Route",icon:"\uD83D\uDDFA️"},{id:"upgrades",name:"Upgrades",icon:"⚡"},{id:"reports",name:"Reports",icon:"\uD83D\uDCCA"},{id:"settings",name:"Settings",icon:"⚙️"}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"flex items-center space-x-2 px-4 py-3 text-sm font-medium transition-colors ".concat(e===t.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"text-lg",children:t.icon}),(0,a.jsx)("span",{children:t.name})]},t.id))}),(0,a.jsxs)("div",{className:"min-h-[400px]",children:["plan"===e&&(0,a.jsx)(y,{onStartDay:()=>{0!==u.length&&(j(),s("route"))},canStartDay:u.length>0&&!x}),"route"===e&&(0,a.jsx)(N,{onEndDay:()=>{f(),l(!0),s("plan")},canEndDay:x}),"upgrades"===e&&(0,a.jsx)(D,{}),"reports"===e&&(0,a.jsx)(E,{}),"settings"===e&&(0,a.jsx)(M,{})]})]})]})})]})}class T extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("ErrorBoundary caught an error:",e,s)}render(){if(this.state.hasError){var e;return this.props.fallback?this.props.fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,a.jsx)("button",{onClick:()=>this.setState({hasError:!1}),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"Try again"})]})})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}function I(){let[e,s]=(0,r.useState)(!1),[t,l]=(0,r.useState)(null);return t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Error Loading Game"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:t}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"Reload Page"})]})}):e?(0,a.jsx)(T,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Game Error"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:"Something went wrong loading the game."}),(0,a.jsx)("button",{onClick:()=>s(!1),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"Back to Menu"})]})}),children:(0,a.jsx)(R,{})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-blue-800 mb-4",children:"\uD83D\uDC15\uD83D\uDCA9 Poopster Game"}),(0,a.jsx)("p",{className:"text-blue-600 mb-8",children:"Build your poop-scooping empire!"}),(0,a.jsx)("button",{onClick:()=>{try{s(!0)}catch(e){l(e instanceof Error?e.message:"Unknown error")}},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg",children:"Start Game"})]})})}}},function(e){e.O(0,[689,870,175,971,938,744],function(){return e(e.s=8294)}),_N_E=e.O()}]);
(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},6226:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},2798:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d});var a=t(482),r=t(9108),l=t(2563),i=t.n(l),n=t(8300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,751)),"C:\\Users\\danog\\Desktop\\code\\poopstergame\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2917)),"C:\\Users\\danog\\Desktop\\code\\poopstergame\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\danog\\Desktop\\code\\poopstergame\\app\\page.tsx"],m="/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5403:()=>{},9017:(e,s,t)=>{Promise.resolve().then(t.bind(t,5780))},5100:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},5780:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>V});var a,r,l,i,n,c,d,o=t(2295),m=t(3729);let u=e=>{let s;let t=new Set,a=(e,a)=>{let r="function"==typeof e?e(s):e;if(!Object.is(r,s)){let e=s;s=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},s,r),t.forEach(t=>t(s,e))}},r=()=>s,l={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},i=s=e(a,r,l);return l},x=e=>e?u(e):u;var h=t(4657);let{useDebugValue:g}=m,{useSyncExternalStoreWithSelector:p}=h,f=!1,b=e=>e,v=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let s="function"==typeof e?x(e):e,t=(e,t)=>(function(e,s=b,t){t&&!f&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),f=!0);let a=p(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,t);return g(a),a})(s,e,t);return Object.assign(t,s),t},j=e=>s=>{try{let t=e(s);if(t instanceof Promise)return t;return{then:e=>j(e)(t),catch(e){return this}}}catch(e){return{then(e){return this},catch:s=>j(s)(e)}}},y={DAY_TIME_BUDGET:8,TILE_DRIVE_TIME:.1,BASE_SCOOP_TIME:.2,STARTING_CASH:1e3,FUEL_COST_PER_TILE:2,SUPPLIES_COST_PER_JOB:5,WORKER_DAILY_WAGE:50,SATISFACTION_SERVICED:2,SATISFACTION_MISSED:-4,CHURN_THRESHOLD:0,AUTO_ROUTE_IMPROVEMENT:.15,BASE_LEAD_CHANCE:.1,MARKETING_LEAD_BONUS:.05},N={SMALL:{name:"Small House",basePrice:25,maxDirtiness:3,frequency:"weekly",color:"#4ade80",size:1},MEDIUM:{name:"Medium House",basePrice:45,maxDirtiness:4,frequency:"weekly",color:"#fbbf24",size:1.2},LARGE:{name:"Large House",basePrice:75,maxDirtiness:5,frequency:"biweekly",color:"#f97316",size:1.5}},D={BAG_CAPACITY:"bag_capacity",WALKING_SPEED:"walking_speed",VAN_SPEED:"van_speed",ROUTE_PLANNER:"route_planner",MARKETING:"marketing",WORKER:"worker",PREMIUM_ADDON:"premium_addon"},S={[D.BAG_CAPACITY]:{name:"Bag Capacity",description:"Reduces supplies cost per job",baseCost:500,costMultiplier:1.5,maxLevel:5,effect:e=>Math.max(.5,1-.1*e),effectDescription:e=>`Supplies cost: ${Math.round((1-Math.max(.5,1-.1*e))*100)}% off`},[D.WALKING_SPEED]:{name:"Walking Speed",description:"Reduces time spent at each house",baseCost:300,costMultiplier:1.4,maxLevel:5,effect:e=>Math.max(.5,1-.1*e),effectDescription:e=>`Scoop time: ${Math.round((1-Math.max(.5,1-.1*e))*100)}% faster`},[D.VAN_SPEED]:{name:"Van Speed",description:"Reduces driving time between houses",baseCost:400,costMultiplier:1.6,maxLevel:5,effect:e=>Math.max(.6,1-.08*e),effectDescription:e=>`Drive time: ${Math.round((1-Math.max(.6,1-.08*e))*100)}% faster`},[D.ROUTE_PLANNER]:{name:"Route Planner+",description:"Better route optimization",baseCost:800,costMultiplier:2,maxLevel:3,effect:e=>1-.05*e,effectDescription:e=>`Route distance: ${Math.round(5*e)}% shorter`},[D.MARKETING]:{name:"Marketing",description:"Increases chance of new leads",baseCost:600,costMultiplier:1.8,maxLevel:5,effect:e=>.05*e,effectDescription:e=>`Lead chance: +${Math.round(5*e)}%`},[D.WORKER]:{name:"Hire Worker",description:"Doubles daily capacity",baseCost:2e3,costMultiplier:1,maxLevel:1,effect:e=>2*e,effectDescription:e=>`Daily capacity: ${2*e}x`},[D.PREMIUM_ADDON]:{name:"Premium Add-on",description:"Some houses upgrade to higher pricing",baseCost:1500,costMultiplier:1,maxLevel:1,effect:e=>.3*e,effectDescription:e=>`Upgrade chance: ${30*e}%`}},w={GRID_WIDTH:20,GRID_HEIGHT:12,ROAD_WIDTH:2,LOT_SIZE:3,STARTING_HOUSES:20,MAX_HOUSES:50},E={TILE_SIZE:32,VAN_SPEED:2,SCOOP_PROGRESS_TIME:2e3},C={day:1,cash:y.STARTING_CASH,timeLeft:y.DAY_TIME_BUDGET,isDayActive:!1,currentRoute:null,houses:[],selectedHouses:[],dailyCapacity:8,upgrades:{},totalRevenue:0,totalExpenses:0,totalProfit:0,housesServiced:0,housesMissed:0,weather:"clear",events:[],dailyEarnings:0,totalCustomers:0,customerSatisfaction:75,dayNumber:1,weeklyStats:{revenue:0,expenses:0,profit:0,newCustomers:0,churnedCustomers:0,retentionRate:100,averageRating:4},customers:[]},I=(n?v(n):v)((c=(e,s)=>({...C,startDay:()=>{let t=s();0!==t.selectedHouses.length&&e({isDayActive:!0,timeLeft:y.DAY_TIME_BUDGET,currentRoute:{houses:t.selectedHouses,projectedRevenue:0,projectedTime:0,projectedFuel:0}})},endDay:()=>{let t=s(),{houses:a,selectedHouses:r,upgrades:l,weather:i}=t,n=0,c=0,d=0,o=0;r.forEach(e=>{let s=a.find(s=>s.id===e);if(s){if(t.timeLeft>0){let e=s.basePrice*(1+.1*s.dirtiness);s.isPremium&&(e*=1.5);let a=l[D.BAG_CAPACITY]||0,r=y.SUPPLIES_COST_PER_JOB*(1-.1*a);n+=e,c+=r,d++,s.satisfaction+=y.SATISFACTION_SERVICED,s.lastServiced=t.day,s.serviced=!0}else o++,s.satisfaction+=y.SATISFACTION_MISSED}});let m=y.FUEL_COST_PER_TILE*(2*r.length);c+=m,l[D.WORKER]&&(c+=y.WORKER_DAILY_WAGE),"rain"===i&&(c*=1.2);let u=n-c,x=a.reduce((e,s)=>e+s.satisfaction,0),h=a.length>0?x/a.length:75,g=Math.floor((t.day-1)/7),p=Math.floor(t.day/7),f=t.weeklyStats;f=p>g?{revenue:n,expenses:c,profit:u,newCustomers:0,churnedCustomers:0,retentionRate:100,averageRating:h/20}:{...f,revenue:f.revenue+n,expenses:f.expenses+c,profit:f.profit+u,averageRating:(f.averageRating+h/20)/2},e({day:t.day+1,cash:t.cash+u,isDayActive:!1,currentRoute:null,selectedHouses:[],totalRevenue:t.totalRevenue+n,totalExpenses:t.totalExpenses+c,totalProfit:t.totalProfit+u,housesServiced:t.housesServiced+d,housesMissed:t.housesMissed+o,timeLeft:0,dailyEarnings:n,totalCustomers:a.length,customerSatisfaction:Math.max(0,Math.min(100,h)),dayNumber:t.day+1,weeklyStats:f}),s().processChurnAndLeads()},selectHouse:t=>{let a=s();!(a.selectedHouses.length>=a.dailyCapacity)&&(a.selectedHouses.includes(t)||e({selectedHouses:[...a.selectedHouses,t]}))},deselectHouse:t=>{e({selectedHouses:s().selectedHouses.filter(e=>e!==t)})},autoPlanRoute:()=>{let t=s(),a=t.houses.filter(e=>!t.selectedHouses.includes(e.id)).map(e=>({...e,profitPerTime:e.basePrice/(.1*e.dirtiness+1)})).sort((e,s)=>s.profitPerTime-e.profitPerTime).slice(0,t.dailyCapacity-t.selectedHouses.length);e({selectedHouses:[...t.selectedHouses,...a.map(e=>e.id)]})},serviceHouse:e=>{let t=s();if(!t.isDayActive||!t.currentRoute)return},purchaseUpgrade:t=>{let a=s(),r=S[t];if(!r)return;let l=a.upgrades[t]||0;if(l>=r.maxLevel)return;let i=r.baseCost*Math.pow(r.costMultiplier,l);if(a.cash<i)return;let n={cash:a.cash-i,upgrades:{...a.upgrades,[t]:l+1}};t===D.WORKER&&(n.dailyCapacity=2*a.dailyCapacity),e(n)},resetGame:()=>{e(C)},saveGame:()=>{},loadGame:()=>{},processChurnAndLeads:()=>{let{houses:t,upgrades:a,day:r}=s(),l=t.filter(e=>!(e.satisfaction<y.CHURN_THRESHOLD)),i=a[D.MARKETING]||0;Math.random()<y.BASE_LEAD_CHANCE+i*y.MARKETING_LEAD_BONUS&&(l.length,w.MAX_HOUSES),e({houses:l})},updateCustomerService:(t,a)=>{e({customers:s().customers.map(e=>e.id===t?{...e,nextService:a}:e)})},addCustomerNote:(t,a)=>{e({customers:s().customers.map(e=>e.id===t?{...e,notes:a}:e)})},churnCustomer:t=>{e({customers:s().customers.map(e=>e.id===t?{...e,status:"churned"}:e)})}}),"getStorage"in(d={name:"poopster-game-state",partialize:e=>({day:e.day,cash:e.cash,houses:e.houses,upgrades:e.upgrades,totalRevenue:e.totalRevenue,totalExpenses:e.totalExpenses,totalProfit:e.totalProfit,housesServiced:e.housesServiced,housesMissed:e.housesMissed})})||"serialize"in d||"deserialize"in d?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),a=c,r=d,(e,s,t)=>{let l,i,n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,s)=>({...s,...e}),...r},c=!1,d=new Set,o=new Set;try{l=n.getStorage()}catch(e){}if(!l)return a((...s)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...s)},s,t);let m=j(n.serialize),u=()=>{let e;let t=m({state:n.partialize({...s()}),version:n.version}).then(e=>l.setItem(n.name,e)).catch(s=>{e=s});if(e)throw e;return t},x=t.setState;t.setState=(e,s)=>{x(e,s),u()};let h=a((...s)=>{e(...s),u()},s,t),g=()=>{var t;if(!l)return;c=!1,d.forEach(e=>e(s()));let a=(null==(t=n.onRehydrateStorage)?void 0:t.call(n,s()))||void 0;return j(l.getItem.bind(l))(n.name).then(e=>{if(e)return n.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return e.state;if(n.migrate)return n.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(t=>{var a;return e(i=n.merge(t,null!=(a=s())?a:h),!0),u()}).then(()=>{null==a||a(i,void 0),c=!0,o.forEach(e=>e(i))}).catch(e=>{null==a||a(void 0,e)})};return t.persist={setOptions:e=>{n={...n,...e},e.getStorage&&(l=e.getStorage())},clearStorage:()=>{null==l||l.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>g(),hasHydrated:()=>c,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},g(),i||h}):(l=c,i=d,(e,s,t)=>{let a,r={storage:function(e,s){let t;try{t=e()}catch(e){return}return{getItem:e=>{var a;let r=e=>null===e?null:JSON.parse(e,null==s?void 0:s.reviver),l=null!=(a=t.getItem(e))?a:null;return l instanceof Promise?l.then(r):r(l)},setItem:(e,a)=>t.setItem(e,JSON.stringify(a,null==s?void 0:s.replacer)),removeItem:e=>t.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,s)=>({...s,...e}),...i},n=!1,c=new Set,d=new Set,o=r.storage;if(!o)return l((...s)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),e(...s)},s,t);let m=()=>{let e=r.partialize({...s()});return o.setItem(r.name,{state:e,version:r.version})},u=t.setState;t.setState=(e,s)=>{u(e,s),m()};let x=l((...s)=>{e(...s),m()},s,t);t.getInitialState=()=>x;let h=()=>{var t,l;if(!o)return;n=!1,c.forEach(e=>{var t;return e(null!=(t=s())?t:x)});let i=(null==(l=r.onRehydrateStorage)?void 0:l.call(r,null!=(t=s())?t:x))||void 0;return j(o.getItem.bind(o))(r.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===r.version)return[!1,e.state];if(r.migrate)return[!0,r.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(t=>{var l;let[i,n]=t;if(e(a=r.merge(n,null!=(l=s())?l:x),!0),i)return m()}).then(()=>{null==i||i(a,void 0),a=s(),n=!0,d.forEach(e=>e(a))}).catch(e=>{null==i||i(void 0,e)})};return t.persist={setOptions:e=>{r={...r,...e},e.storage&&(o=e.storage)},clearStorage:()=>{null==o||o.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>h(),hasHydrated:()=>n,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},r.skipHydration||h(),a||x})));function M(){let e=[],{GRID_WIDTH:s,GRID_HEIGHT:t,ROAD_WIDTH:a,LOT_SIZE:r,STARTING_HOUSES:l}=w,i=new Set;for(let e=a;e<t;e+=r+a)for(let t=0;t<s;t++)i.add(`${t},${e}`);for(let e=a;e<s;e+=r+a)for(let s=0;s<t;s++)i.add(`${e},${s}`);let n=[];for(let e=0;e<t;e++)for(let l=0;l<s;l++){let c=!1;for(let s=0;s<a;s++){for(let t=0;t<a;t++)if(i.has(`${l+t},${e+s}`)){c=!0;break}if(c)break}let d=!1;for(let s=0;s<r;s++){for(let t=0;t<r;t++)if(i.has(`${l+t},${e+s}`)){d=!0;break}if(d)break}!c&&!d&&l+r/2<s&&e+r/2<t&&n.push({x:Math.floor(l+r/2),y:Math.floor(e+r/2)})}let c=n.sort(()=>Math.random()-.5);for(let s=0;s<Math.min(l,c.length);s++){let t=c[s],a=function(e,s,t){let a;let r=Math.sqrt(Math.pow(e-w.GRID_WIDTH/2,2)+Math.pow(s-w.GRID_HEIGHT/2,2)),l=N[a=r<3?"LARGE":r<6?"MEDIUM":"SMALL"].maxDirtiness;return{id:`house_${t}`,x:e,y:s,tier:a,basePrice:N[a].basePrice,dirtiness:Math.floor(Math.random()*l)+1,frequency:.7>Math.random()?"weekly":"biweekly",lastServiced:0,satisfaction:Math.floor(3*Math.random())+2,isPremium:("MEDIUM"===a||"LARGE"===a)&&.1>Math.random()}}(t.x,t.y,s);e.push(a)}return e}function T(){let{GRID_WIDTH:e,GRID_HEIGHT:s,ROAD_WIDTH:t,LOT_SIZE:a}=w,r=[];for(let l=t;l<s;l+=a+t)for(let s=0;s<e;s++)r.push({x:s,y:l});for(let l=t;l<e;l+=a+t)for(let e=0;e<s;e++)r.push({x:l,y:e});return r}function R(e,s,t,a){return Math.sqrt(Math.pow(t-e,2)+Math.pow(a-s,2))}function A(e,s){if(0===s.length)return{points:[],totalDistance:0,totalTime:0,totalRevenue:0,totalFuel:0};let t=e.filter(e=>s.includes(e.id)),a=[],r=[...t],l=0,i=0,n=0,c=r[0],d=R(10,6,c.x,c.y);for(let e of r){let s=R(10,6,e.x,e.y);s<d&&(d=s,c=e)}let o=r.findIndex(e=>e.id===c.id);for(r.splice(o,1),a.push({houseId:c.id,x:c.x,y:c.y,estimatedTime:0,estimatedRevenue:c.basePrice*(1+.1*c.dirtiness)}),l=c.x,i=c.y;r.length>0;){let e=r[0],s=R(l,i,e.x,e.y);for(let t of r){let a=R(l,i,t.x,t.y);a<s&&(s=a,e=t)}a.push({houseId:e.id,x:e.x,y:e.y,estimatedTime:0,estimatedRevenue:e.basePrice*(1+.1*e.dirtiness)}),n+=s,l=e.x,i=e.y;let t=r.findIndex(s=>s.id===e.id);r.splice(t,1)}let m=0,u=0;for(let e=0;e<a.length;e++){let s=a[e],t=0;if(e>0){let r=a[e-1];t=R(r.x,r.y,s.x,s.y)*y.TILE_DRIVE_TIME}let r=y.BASE_SCOOP_TIME;s.estimatedTime=t+r,m+=s.estimatedTime,u+=s.estimatedRevenue}let x=1-y.AUTO_ROUTE_IMPROVEMENT;n*=x,m*=x;let h=n*y.FUEL_COST_PER_TILE;return{points:a,totalDistance:n,totalTime:m,totalRevenue:u,totalFuel:h}}let _=null;function k(){let e=(0,m.useRef)(null),[s,a]=(0,m.useState)(!1),{houses:r,selectedHouses:l,isDayActive:i,currentRoute:n,timeLeft:c,weather:d}=I();(0,m.useEffect)(()=>{if(e.current&&!s)return(async()=>{try{(_=(0,(await t.e(110).then(t.bind(t,1110))).default)({canvas:e.current,width:w.GRID_WIDTH*E.TILE_SIZE,height:w.GRID_HEIGHT*E.TILE_SIZE,background:[.95,.95,.95],global:!1})).loadSprite("van","/assets/van.png"),_.loadSprite("house_small","/assets/house_small.png"),_.loadSprite("house_medium","/assets/house_medium.png"),_.loadSprite("house_large","/assets/house_large.png"),_.loadSprite("pin","/assets/pin.png"),_.scene("game",()=>{for(let e=0;e<w.GRID_WIDTH;e++)for(let s=0;s<w.GRID_HEIGHT;s++)_.add([_.rect(E.TILE_SIZE,E.TILE_SIZE),_.pos(e*E.TILE_SIZE,s*E.TILE_SIZE),_.outline(1,[.9,.9,.9]),_.color(.98,.98,.98)]);if(T().forEach(({x:e,y:s})=>{_.add([_.rect(E.TILE_SIZE,E.TILE_SIZE),_.pos(e*E.TILE_SIZE,s*E.TILE_SIZE),_.color(.3,.3,.3)])}),r.forEach(e=>{let s=`house_${e.tier.toLowerCase()}`,t=l.includes(e.id),a=_.add([_.sprite(s),_.pos(e.x*E.TILE_SIZE+E.TILE_SIZE/2,e.y*E.TILE_SIZE+E.TILE_SIZE/2),_.scale(.8),_.origin("center"),{id:e.id,tier:e.tier,isSelected:t,satisfaction:e.satisfaction,isPremium:e.isPremium}]);t&&_.add([_.sprite("pin"),_.pos(e.x*E.TILE_SIZE+E.TILE_SIZE/2,e.y*E.TILE_SIZE-5),_.scale(.6),_.origin("center"),_.color(0,1,0)]);let r=e.satisfaction>=5?[0,1,0]:e.satisfaction>=2?[1,1,0]:[1,0,0];_.add([_.rect(20,4),_.pos(e.x*E.TILE_SIZE+6,e.y*E.TILE_SIZE+E.TILE_SIZE-8),_.color(...r),_.origin("topleft")]),e.isPremium&&_.add([_.text("⭐"),_.pos(e.x*E.TILE_SIZE+E.TILE_SIZE-8,e.y*E.TILE_SIZE+2),_.scale(.8),_.origin("topleft")]),a.onClick(()=>{console.log("House clicked:",e.id)})}),i&&n){let e=_.add([_.sprite("van"),_.pos(0,0),_.scale(.8),_.origin("center"),"van"]);u(e,n)}if("rain"===d)for(let e=0;e<50;e++)_.add([_.rect(1,3),_.pos(Math.random()*_.width(),Math.random()*_.height()),_.color(.5,.7,1),_.move(0,100),_.lifespan(2)])}),_.go("game"),a(!0)}catch(e){console.error("Failed to initialize Kaboom:",e),h()}})(),()=>{_&&(_.destroyAll(),_=null)}},[]),(0,m.useEffect)(()=>{if(_&&s&&(r.forEach(e=>{let s=_.get("house")[0];s&&s.id===e.id&&(s.isSelected=l.includes(e.id),x(s,e))}),i&&n)){let e=_.get("van")[0];e&&u(e,n)}},[r,l,i,n,s]);let u=(e,s)=>{if(!s.houses||0===s.houses.length)return;let t=function(e){let s=[];for(let t of e.points)s.push({x:t.x,y:t.y});return s}(s),a=0,r=()=>{if(a>=t.length)return;let s=t[a],l=s.x*E.TILE_SIZE+E.TILE_SIZE/2,i=s.y*E.TILE_SIZE+E.TILE_SIZE/2;e.moveTo(l,i,32*E.VAN_SPEED),e.onStateEnter("idle",()=>{++a<t.length&&r()})};r()},x=(e,s)=>{s.satisfaction>=5||s.satisfaction,s.isSelected},h=()=>{if(!e.current)return;let s=e.current.getContext("2d");if(!s)return;let t=e.current;t.width=w.GRID_WIDTH*E.TILE_SIZE,t.height=w.GRID_HEIGHT*E.TILE_SIZE,s.fillStyle="#fafafa",s.fillRect(0,0,t.width,t.height),s.fillStyle="#4a5568",T().forEach(({x:e,y:t})=>{s.fillRect(e*E.TILE_SIZE,t*E.TILE_SIZE,E.TILE_SIZE,E.TILE_SIZE)}),r.forEach(e=>{let t=e.x*E.TILE_SIZE,a=e.y*E.TILE_SIZE,r=.8*E.TILE_SIZE;s.fillStyle=({SMALL:"#4ade80",MEDIUM:"#fbbf24",LARGE:"#f97316"})[e.tier],s.fillRect(t+4,a+4,r,r),l.includes(e.id)&&(s.strokeStyle="#22c55e",s.lineWidth=3,s.strokeRect(t+2,a+2,r+4,r+4));let i=e.satisfaction>=5?"#22c55e":e.satisfaction>=2?"#eab308":"#ef4444";s.fillStyle=i,s.fillRect(t+6,a+r-8,20,4)})};return(0,o.jsxs)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:[o.jsx("canvas",{ref:e,className:"border border-gray-300 rounded-lg overflow-hidden",style:{width:w.GRID_WIDTH*E.TILE_SIZE,height:w.GRID_HEIGHT*E.TILE_SIZE}}),!s&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-2"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Loading game..."})]})})]})}function L({onStartDay:e,canStartDay:s}){let{houses:t,selectedHouses:a,dailyCapacity:r,selectHouse:l,deselectHouse:i,autoPlanRoute:n}=I(),c=a.length>0?A(t,a):null,d=c?{houses:c.points.length,distance:Math.round(10*c.totalDistance)/10,time:Math.round(10*c.totalTime)/10,revenue:Math.round(c.totalRevenue),fuel:Math.round(c.totalFuel)}:null,m=[...t].sort((e,s)=>{if(a.includes(e.id)&&!a.includes(s.id))return -1;if(!a.includes(e.id)&&a.includes(s.id))return 1;let t=e.basePrice*(1+.1*e.dirtiness);return s.basePrice*(1+.1*s.dirtiness)-t}),u=e=>{a.includes(e)?i(e):a.length<r&&l(e)},x=e=>a.includes(e.id)?"selected":a.length>=r?"disabled":"available",h=e=>e>=5?"text-green-600":e>=2?"text-yellow-600":"text-red-600",g=e=>e>=5?"Excellent":e>=2?"Good":e>=0?"Fair":"Poor";return(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Plan Your Route"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:[a.length,"/",r," houses selected"]})]}),o.jsx("button",{onClick:()=>{n()},disabled:a.length>=r,className:"w-full game-button-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDE80 Auto-Plan Route"}),d&&(0,o.jsxs)("div",{className:"game-card bg-blue-50 border-blue-200",children:[o.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Route Projection"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-blue-700",children:"Houses:"}),o.jsx("span",{className:"font-medium",children:d.houses})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-blue-700",children:"Revenue:"}),(0,o.jsxs)("span",{className:"font-medium text-green-600",children:["$",d.revenue]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-blue-700",children:"Time:"}),(0,o.jsxs)("span",{className:"font-medium",children:[d.time,"h"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-blue-700",children:"Fuel:"}),(0,o.jsxs)("span",{className:"font-medium text-red-600",children:["$",d.fuel]})]})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold text-gray-700",children:"Available Houses"}),o.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:m.map(e=>{let s=x(e),t=a.includes(e.id),r=e.basePrice*(1+.1*e.dirtiness);return o.jsx("div",{className:`game-card cursor-pointer transition-all ${t?"ring-2 ring-primary-500 bg-primary-50":"hover:bg-gray-50"} ${"disabled"===s?"opacity-50 cursor-not-allowed":""}`,onClick:()=>u(e.id),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${t?"bg-primary-500 border-primary-500":"border-gray-300"}`,children:t&&o.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`text-sm font-medium ${"#4ade80"===N[e.tier].color?"text-green-600":"#fbbf24"===N[e.tier].color?"text-yellow-600":"text-orange-600"}`,children:N[e.tier].name}),e.isPremium&&o.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full",children:"⭐ Premium"})]}),(0,o.jsxs)("div",{className:"text-xs text-gray-500",children:["Dirtiness: ",e.dirtiness,"/5 • ",e.frequency]})]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"font-semibold text-green-600",children:["$",Math.round(r)]}),o.jsx("div",{className:`text-xs ${h(e.satisfaction)}`,children:g(e.satisfaction)})]})]})},e.id)})})]}),o.jsx("button",{onClick:e,disabled:!s,className:"w-full game-button text-lg py-4 disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDE97 Start Day"}),(0,o.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[o.jsx("div",{children:"\uD83D\uDCA1 Select houses to create your daily route"}),o.jsx("div",{children:"\uD83D\uDCA1 Higher dirtiness = more revenue"}),o.jsx("div",{children:"\uD83D\uDCA1 Premium houses pay 50% more"}),o.jsx("div",{children:"\uD83D\uDCA1 Keep customers happy to avoid churn"})]})]})}function P({onEndDay:e,canEndDay:s}){let{currentRoute:t,houses:a,timeLeft:r,isDayActive:l,weather:i}=I(),[n,c]=(0,m.useState)(0),[d,u]=(0,m.useState)(!1),[x,h]=(0,m.useState)(0),[g,p]=(0,m.useState)([]),f=t&&t.houses[n]?a.find(e=>e.id===t.houses[n]):null;(0,m.useEffect)(()=>{if(!l)return;let e=setInterval(()=>{I.setState(e=>({timeLeft:Math.max(0,e.timeLeft-.1)}))},1e3);return()=>clearInterval(e)},[l]);let b=()=>{f&&(p(e=>[...e,f.id]),n<(t?.houses.length||0)-1&&c(e=>e+1),u(!1),h(0))},v=t?g.length/t.houses.length*100:0;return l&&t?(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{className:"game-card bg-blue-50 border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"font-semibold text-blue-800",children:"Route Progress"}),(0,o.jsxs)("div",{className:"text-sm text-blue-600",children:[(()=>{switch(i){case"rain":return"\uD83C\uDF27️";case"heat":return"\uD83D\uDD25";default:return"☀️"}})()," ",i]})]}),o.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:o.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${v}%`}})}),(0,o.jsxs)("div",{className:"text-sm text-blue-700",children:[g.length," of ",t.houses.length," houses completed"]})]}),f&&(0,o.jsxs)("div",{className:"game-card bg-green-50 border-green-200",children:[o.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Current House"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-green-700",children:"Type:"}),o.jsx("span",{className:"font-medium",children:f.tier})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-green-700",children:"Dirtiness:"}),(0,o.jsxs)("span",{className:"font-medium",children:[f.dirtiness,"/5"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-green-700",children:"Revenue:"}),(0,o.jsxs)("span",{className:"font-medium text-green-600",children:["$",Math.round(f.basePrice*(1+.1*f.dirtiness))]})]})]})]}),f&&!g.includes(f.id)&&(0,o.jsxs)("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{if(!f||d)return;u(!0),h(0);let e=E.SCOOP_PROGRESS_TIME,s=setInterval(()=>{h(t=>{let a=t+100/(e/50);return a>=100?(clearInterval(s),b(),100):a})},50)},disabled:d,className:"w-full game-button text-lg py-4 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"\uD83D\uDD04 Scooping...":"\uD83D\uDCA9 Scoop This House!"}),d&&o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-primary-500 h-3 rounded-full transition-all duration-100",style:{width:`${x}%`}})})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold text-gray-700",children:"Route Queue"}),o.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:t.houses.map((e,s)=>{let t=a.find(s=>s.id===e);if(!t)return null;let r=g.includes(e),l=s===n;return(0,o.jsxs)("div",{className:`p-2 rounded-lg text-sm ${r?"bg-green-100 text-green-800":l?"bg-blue-100 text-blue-800 ring-2 ring-blue-300":"bg-gray-100 text-gray-600"}`,children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("span",{className:"font-medium",children:[s+1,". ",t.tier," House"]}),o.jsx("span",{className:"text-xs",children:r?"✅":l?"\uD83D\uDD04":"⏳"})]}),l&&(0,o.jsxs)("div",{className:"text-xs mt-1",children:["Dirtiness: ",t.dirtiness,"/5 • Revenue: $",Math.round(t.basePrice*(1+.1*t.dirtiness))]})]},e)})})]}),(0,o.jsxs)("div",{className:"game-card bg-yellow-50 border-yellow-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsxs)("div",{className:"text-yellow-800",children:[o.jsx("div",{className:"text-sm",children:"Time Remaining"}),(0,o.jsxs)("div",{className:"text-xl font-bold",children:[r.toFixed(1),"h"]})]}),(0,o.jsxs)("div",{className:"text-right text-yellow-700",children:[o.jsx("div",{className:"text-sm",children:"Route Status"}),(0,o.jsxs)("div",{className:"text-lg font-semibold",children:[v.toFixed(0),"% Complete"]})]})]}),o.jsx("button",{onClick:e,disabled:!s,className:"w-full game-button-secondary text-lg py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83C\uDFC1 End Day"})]}),(0,o.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[o.jsx("div",{children:'\uD83D\uDCA1 Tap "Scoop" when you arrive at each house'}),o.jsx("div",{children:"\uD83D\uDCA1 Keep an eye on your time budget"}),o.jsx("div",{children:"\uD83D\uDCA1 Weather affects your efficiency"}),o.jsx("div",{children:"\uD83D\uDCA1 Complete all houses for maximum profit"})]})]}):(0,o.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[o.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDE97"}),o.jsx("div",{children:"No active route"}),o.jsx("div",{className:"text-sm",children:"Go to Plan tab to start your day"})]})}function H(){let{cash:e,upgrades:s,purchaseUpgrade:t}=I(),a=e=>{t(e)},r=e=>{let t=S[e];if(!t)return 0;let a=s[e]||0;return Math.round(t.baseCost*Math.pow(t.costMultiplier,a))},l=s=>e>=r(s),i=e=>{let t=S[e];return!t||(s[e]||0)>=t.maxLevel},n=e=>i(e)?"maxed":l(e)?"available":"unaffordable",c=e=>({[D.BAG_CAPACITY]:"\uD83D\uDC5C",[D.WALKING_SPEED]:"\uD83D\uDEB6",[D.VAN_SPEED]:"\uD83D\uDE90",[D.ROUTE_PLANNER]:"\uD83D\uDDFA️",[D.MARKETING]:"\uD83D\uDCE2",[D.WORKER]:"\uD83D\uDC77",[D.PREMIUM_ADDON]:"⭐"})[e]||"\uD83D\uDD27";return(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Upgrades & Improvements"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:["$",e.toLocaleString()," available"]})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(S).map(([e,t])=>{let l=s[e]||0,i=r(e),d=n(e);return(0,o.jsxs)("div",{className:`game-card transition-all ${"maxed"===d?"bg-green-50 border-green-200":"available"===d?"hover:shadow-lg":"opacity-75"}`,children:[(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("span",{className:"text-2xl",children:c(e)}),(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:t.name}),(0,o.jsxs)("div",{className:"text-xs text-gray-500",children:["Level ",l,"/",t.maxLevel]})]})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-3",children:t.description}),l>0&&o.jsx("div",{className:"text-sm text-green-700 mb-2",children:t.effectDescription(l)}),l<t.maxLevel&&(0,o.jsxs)("div",{className:"text-sm text-blue-700",children:["Next level: ",t.effectDescription(l+1)]})]}),o.jsx("div",{className:"text-right ml-4",children:"maxed"===d?o.jsx("div",{className:"text-green-600 font-semibold text-sm",children:"MAXED OUT"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"text-lg font-bold text-gray-800 mb-2",children:["$",i.toLocaleString()]}),o.jsx("button",{onClick:()=>a(e),disabled:"unaffordable"===d,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"available"===d?"bg-primary-500 hover:bg-primary-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"available"===d?"Purchase":"Not Enough Cash"})]})})]}),t.maxLevel>1&&(0,o.jsxs)("div",{className:"mt-3",children:[(0,o.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[o.jsx("span",{children:"Progress"}),(0,o.jsxs)("span",{children:[l,"/",t.maxLevel]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${l/t.maxLevel*100}%`}})})]})]},e)})}),(0,o.jsxs)("div",{className:"game-card bg-blue-50 border-blue-200",children:[o.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCA1 Upgrade Strategy"}),(0,o.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[o.jsx("div",{children:"• Start with Bag Capacity to reduce costs"}),o.jsx("div",{children:"• Van Speed improves route efficiency"}),o.jsx("div",{children:"• Marketing brings in new customers"}),o.jsx("div",{children:"• Workers double your daily capacity"}),o.jsx("div",{children:"• Premium Add-on increases high-tier revenue"})]})]}),(0,o.jsxs)("div",{className:"game-card bg-gray-50 border-gray-200",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Current Upgrades"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(S).map(([e,t])=>{let a=s[e]||0;return 0===a?null:(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)("span",{className:"text-gray-600",children:[t.name,":"]}),(0,o.jsxs)("span",{className:"font-medium",children:["Level ",a]})]},e)})})]})]})}function F(){var e,s;let{cash:t,dailyEarnings:a,totalCustomers:r,customerSatisfaction:l,dayNumber:i,weeklyStats:n}=I(),[c,d]=(0,m.useState)("day"),u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),x=e=>`${Math.round(e)}%`;return(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Business Statistics"}),o.jsx("div",{className:"flex space-x-2",children:["day","week","month"].map(e=>o.jsx("button",{onClick:()=>d(e),className:`px-3 py-1 text-sm rounded-md transition-colors ${c===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"game-card bg-green-50 border-green-200",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCB0"}),o.jsx("div",{className:"text-lg font-bold text-green-700",children:u(t)}),o.jsx("div",{className:"text-xs text-green-600",children:"Available Cash"})]})}),o.jsx("div",{className:"game-card bg-blue-50 border-blue-200",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCC8"}),o.jsx("div",{className:"text-lg font-bold text-blue-700",children:u(a||0)}),o.jsx("div",{className:"text-xs text-blue-600",children:"Today's Earnings"})]})}),o.jsx("div",{className:"game-card bg-purple-50 border-purple-200",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83C\uDFE0"}),o.jsx("div",{className:"text-lg font-bold text-purple-700",children:r||0}),o.jsx("div",{className:"text-xs text-purple-600",children:"Total Customers"})]})}),o.jsx("div",{className:"game-card bg-orange-50 border-orange-200",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:(e=l||0)>=80?"\uD83D\uDE0A":e>=60?"\uD83D\uDE10":"\uD83D\uDE1E"}),o.jsx("div",{className:`text-lg font-bold ${(s=l||0)>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600"}`,children:x(l||0)}),o.jsx("div",{className:"text-xs text-orange-600",children:"Satisfaction"})]})})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Business Performance"}),(0,o.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Day:"}),o.jsx("span",{className:"font-medium",children:i||1})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Weekly Revenue:"}),o.jsx("span",{className:"font-medium",children:u(n?.revenue||0)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Weekly Expenses:"}),o.jsx("span",{className:"font-medium",children:u(n?.expenses||0)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Weekly Profit:"}),o.jsx("span",{className:`font-medium ${(n?.profit||0)>=0?"text-green-600":"text-red-600"}`,children:u(n?.profit||0)})]})]})]}),(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Customer Insights"}),(0,o.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"New This Week:"}),o.jsx("span",{className:"font-medium",children:n?.newCustomers||0})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Churned This Week:"}),o.jsx("span",{className:"font-medium text-red-600",children:n?.churnedCustomers||0})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Retention Rate:"}),o.jsx("span",{className:"font-medium",children:x(n?.retentionRate||0)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Avg. Rating:"}),(0,o.jsxs)("span",{className:"font-medium",children:["⭐ ",n?.averageRating?.toFixed(1)||"N/A"]})]})]})]})]}),(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Business Growth"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-gray-600",children:"Customer Base"}),(0,o.jsxs)("span",{className:"font-medium",children:[r||0," / 100"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((r||0)/100*100,100)}%`}})})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-gray-600",children:"Satisfaction Goal"}),(0,o.jsxs)("span",{className:"font-medium",children:[l||0,"% / 90%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((l||0)/90*100,100)}%`}})})]})]})]})]})}function $(){var e;let{cash:s,dailyEarnings:t,weeklyStats:a}=I(),[r,l]=(0,m.useState)("week"),[i,n]=(0,m.useState)("profit"),c=[{date:"2024-01-01",revenue:1200,expenses:800,profit:400,customers:15},{date:"2024-01-02",revenue:1350,expenses:750,profit:600,customers:18},{date:"2024-01-03",revenue:1100,expenses:700,profit:400,customers:16},{date:"2024-01-04",revenue:1600,expenses:900,profit:700,customers:22},{date:"2024-01-05",revenue:1400,expenses:850,profit:550,customers:19},{date:"2024-01-06",revenue:1800,expenses:950,profit:850,customers:25},{date:"2024-01-07",revenue:1300,expenses:800,profit:500,customers:17}],d=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),u=e=>`${Math.round(e)}%`,x=(()=>{switch(r){case"week":default:return c.slice(-7);case"month":case"quarter":return c}})(),h=x.reduce((e,s)=>e+s.revenue,0),g=x.reduce((e,s)=>e+s.expenses,0),p=h-g,f=Math.round(x.reduce((e,s)=>e+s.customers,0)/x.length),b=h>0?p/h*100:0;return(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Financial Dashboard"}),o.jsx("div",{className:"flex space-x-2",children:["week","month","quarter"].map(e=>o.jsx("button",{onClick:()=>l(e),className:`px-3 py-1 text-sm rounded-md transition-colors ${r===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"game-card bg-green-50 border-green-200",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCB0"}),o.jsx("div",{className:"text-lg font-bold text-green-700",children:d(h)}),o.jsx("div",{className:"text-xs text-green-600",children:"Total Revenue"})]})}),o.jsx("div",{className:"game-card bg-red-50 border-red-200",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCB8"}),o.jsx("div",{className:"text-lg font-bold text-red-700",children:d(g)}),o.jsx("div",{className:"text-xs text-red-600",children:"Total Expenses"})]})}),o.jsx("div",{className:"game-card bg-blue-50 border-blue-200",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCC8"}),o.jsx("div",{className:`text-lg font-bold ${p>=0?"text-blue-700":"text-red-700"}`,children:d(p)}),o.jsx("div",{className:"text-xs text-blue-600",children:"Net Profit"})]})}),o.jsx("div",{className:"game-card bg-purple-50 border-purple-200",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCCA"}),o.jsx("div",{className:`text-lg font-bold ${b>=0?"text-purple-700":"text-red-700"}`,children:u(b)}),o.jsx("div",{className:"text-xs text-purple-600",children:"Profit Margin"})]})})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Revenue vs Expenses"}),o.jsx("div",{className:"space-y-2",children:x.map((e,s)=>(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"text-xs text-gray-500 w-16",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,o.jsxs)("div",{className:"flex-1 flex space-x-1",children:[o.jsx("div",{className:"bg-green-500 h-4 rounded-l",style:{width:`${e.revenue/Math.max(...x.map(e=>e.revenue))*100}%`}}),o.jsx("div",{className:"bg-red-500 h-4 rounded-r",style:{width:`${e.expenses/Math.max(...x.map(e=>e.expenses))*100}%`}})]}),o.jsx("div",{className:"text-xs text-gray-600 w-20 text-right",children:d(e.revenue)})]},s))}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-4 mt-3 text-xs",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),o.jsx("span",{children:"Revenue"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),o.jsx("span",{children:"Expenses"})]})]})]}),(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Profit Trend"}),o.jsx("div",{className:"space-y-2",children:x.map((e,s)=>(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"text-xs text-gray-500 w-16",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),o.jsx("div",{className:"flex-1",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:`h-4 rounded transition-all ${e.profit>=0?"bg-blue-500":"bg-red-500"}`,style:{width:`${Math.abs(e.profit)/Math.max(...x.map(e=>Math.abs(e.profit)))*100}%`}}),o.jsx("span",{className:`text-xs font-medium ${e.profit>=0?"text-blue-600":"text-red-600"}`,children:d(e.profit)})]})})]},s))})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Revenue Breakdown"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Small Houses"}),o.jsx("span",{className:"font-medium",children:d(.4*h)})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Medium Houses"}),o.jsx("span",{className:"font-medium",children:d(.35*h)})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Large Houses"}),o.jsx("span",{className:"font-medium",children:d(.25*h)})]}),o.jsx("div",{className:"pt-2 border-t",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Total Revenue"}),o.jsx("span",{className:"font-bold text-green-600",children:d(h)})]})})]})]}),(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Expense Breakdown"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Fuel Costs"}),o.jsx("span",{className:"font-medium",children:d(.3*g)})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Supplies"}),o.jsx("span",{className:"font-medium",children:d(.25*g)})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Worker Wages"}),o.jsx("span",{className:"font-medium",children:d(.35*g)})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Other"}),o.jsx("span",{className:"font-medium",children:d(.1*g)})]}),o.jsx("div",{className:"pt-2 border-t",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Total Expenses"}),o.jsx("span",{className:"font-bold text-red-600",children:d(g)})]})})]})]})]}),(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Financial Insights"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCCA"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Daily Revenue"}),o.jsx("div",{className:"text-lg font-bold text-blue-600",children:d(Math.round(h/x.length))})]}),(0,o.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83C\uDFAF"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Revenue per Customer"}),o.jsx("div",{className:"text-lg font-bold text-green-600",children:d(Math.round(h/f))})]}),(0,o.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCC8"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Growth Rate"}),o.jsx("div",{className:"text-lg font-bold text-purple-600",children:u(0==(e=.9*h)?0:(h-e)/e*100)})]})]})]}),(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Quick Actions"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsx("button",{className:"px-3 py-2 text-sm bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"\uD83D\uDCCA Export Report"}),o.jsx("button",{className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"\uD83D\uDCB0 Set Budget"}),o.jsx("button",{className:"px-3 py-2 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:"\uD83D\uDCC8 Forecast"}),o.jsx("button",{className:"px-3 py-2 text-sm bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",children:"\uD83D\uDD0D Analyze"})]})]})]})}function O(){let{customers:e,updateCustomerService:s,addCustomerNote:t,churnCustomer:a}=I(),[r,l]=(0,m.useState)(null),[i,n]=(0,m.useState)("all"),[c,d]=(0,m.useState)(""),[u,x]=(0,m.useState)(""),h=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"pending":return"text-blue-600 bg-blue-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},g=e=>{switch(e){case"active":return"✅";case"pending":return"⏳";case"overdue":return"\uD83D\uDEA8";case"churned":return"❌";default:return"❓"}},p=e=>{switch(e){case"SMALL":default:return"\uD83C\uDFE0";case"MEDIUM":return"\uD83C\uDFD8️";case"LARGE":return"\uD83C\uDFF0"}},f=e=>e?new Date(e).toLocaleDateString():"Never",b=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600",v=e?.filter(e=>{let s="all"===i||e.status===i,t=e.name.toLowerCase().includes(c.toLowerCase())||e.address.toLowerCase().includes(c.toLowerCase());return s&&t})||[],j=(e,t)=>{s?.(e,t)},y=e=>{u.trim()&&(t?.(e,u),x(""))},D=e=>{confirm("Are you sure you want to mark this customer as churned?")&&a?.(e)};return(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Customer Management"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:[v.length," customers"]})]}),(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",placeholder:"Search customers by name or address...",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),o.jsx("div",{className:"flex space-x-2",children:["all","active","pending","overdue","churned"].map(e=>o.jsx("button",{onClick:()=>n(e),className:`px-3 py-2 text-sm rounded-md transition-colors ${i===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:v.map(e=>(0,o.jsxs)("div",{onClick:()=>l(e),className:`game-card cursor-pointer transition-all hover:shadow-md ${r?.id===e.id?"ring-2 ring-blue-500":""}`,children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-2xl",children:p(e.tier)}),(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:e.name}),o.jsx("p",{className:"text-sm text-gray-600",children:e.address})]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h(e.status)}`,children:[o.jsx("span",{className:"mr-1",children:g(e.status)}),e.status]}),(0,o.jsxs)("div",{className:`text-sm mt-1 ${b(e.satisfaction)}`,children:[e.satisfaction,"% satisfaction"]})]})]}),(0,o.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,o.jsxs)("span",{children:["Last: ",f(e.lastService)]}),o.jsx("span",{className:"mx-2",children:"•"}),(0,o.jsxs)("span",{children:["Next: ",f(e.nextService)]})]})]},e.id))})}),o.jsx("div",{className:"lg:col-span-1",children:r?(0,o.jsxs)("div",{className:"game-card space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-3xl",children:p(r.tier)}),(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:r.name}),o.jsx("p",{className:"text-sm text-gray-600",children:r.address})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"House Tier"}),o.jsx("div",{className:"text-sm text-gray-600",children:N[r.tier]?.name})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Status"}),(0,o.jsxs)("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h(r.status)}`,children:[o.jsx("span",{className:"mr-1",children:g(r.status)}),r.status]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Satisfaction"}),(0,o.jsxs)("div",{className:`text-sm ${b(r.satisfaction)}`,children:[r.satisfaction,"%"]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Service"}),o.jsx("div",{className:"text-sm text-gray-600",children:f(r.lastService)})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Service"}),o.jsx("input",{type:"date",value:r.nextService?r.nextService.split("T")[0]:"",onChange:e=>j(r.id,e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add Note"}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"Add a note...",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),o.jsx("button",{onClick:()=>y(r.id),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Add"})]})]}),r.notes&&(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),o.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:r.notes})]}),o.jsx("div",{className:"pt-2 border-t",children:o.jsx("button",{onClick:()=>D(r.id),className:"w-full px-3 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Mark as Churned"})})]})]}):o.jsx("div",{className:"game-card text-center text-gray-500 py-8",children:"Select a customer to view details"})})]}),(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Quick Actions"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsx("button",{className:"px-3 py-2 text-sm bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"\uD83D\uDCC5 Schedule All"}),o.jsx("button",{className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"\uD83D\uDCCA Export Data"}),o.jsx("button",{className:"px-3 py-2 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:"\uD83D\uDCE7 Send Reminders"}),o.jsx("button",{className:"px-3 py-2 text-sm bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",children:"\uD83C\uDFAF Find Prospects"})]})]})]})}function G(){let[e,s]=(0,m.useState)("stats"),t=[{id:"stats",name:"Statistics",icon:"\uD83D\uDCCA",component:F},{id:"financial",name:"Financial",icon:"\uD83D\uDCB0",component:$},{id:"customers",name:"Customers",icon:"\uD83D\uDC65",component:O}],a=t.find(s=>s.id===e)?.component||F;return(0,o.jsxs)("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:t.map(t=>(0,o.jsxs)("button",{onClick:()=>s(t.id),className:`flex items-center space-x-2 px-4 py-3 text-sm font-medium transition-colors ${e===t.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[o.jsx("span",{className:"text-lg",children:t.icon}),o.jsx("span",{children:t.name})]},t.id))}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:o.jsx(a,{})})]})}function U(){let[e,s]=(0,m.useState)("audio"),[t,a]=(0,m.useState)({audio:{masterVolume:80,musicVolume:70,sfxVolume:90,enableMusic:!0,enableSFX:!0},gameplay:{autoSave:!0,autoSaveInterval:5,showTutorials:!0,difficulty:"normal",timeScale:1},display:{theme:"auto",fontSize:"medium",showAnimations:!0,showNotifications:!0},business:{startingCash:1e3,customerSatisfactionThreshold:60,maxCustomers:100,enableEvents:!0}}),r=(e,s,t)=>{a(a=>({...a,[e]:{...a[e],[s]:t}}))};return(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Game Settings"}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>{confirm("Are you sure you want to reset all settings to defaults?")&&a({audio:{masterVolume:80,musicVolume:70,sfxVolume:90,enableMusic:!0,enableSFX:!0},gameplay:{autoSave:!0,autoSaveInterval:5,showTutorials:!0,difficulty:"normal",timeScale:1},display:{theme:"auto",fontSize:"medium",showAnimations:!0,showNotifications:!0},business:{startingCash:1e3,customerSatisfactionThreshold:60,maxCustomers:100,enableEvents:!0}})},className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Reset to Defaults"}),o.jsx("button",{onClick:()=>{localStorage.setItem("poopsterGameSettings",JSON.stringify(t)),alert("Settings saved successfully!")},className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Save Settings"})]})]}),o.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[{id:"audio",name:"Audio",icon:"\uD83D\uDD0A"},{id:"gameplay",name:"Gameplay",icon:"\uD83C\uDFAE"},{id:"display",name:"Display",icon:"\uD83C\uDFA8"},{id:"business",name:"Business",icon:"\uD83D\uDCBC"}].map(t=>(0,o.jsxs)("button",{onClick:()=>s(t.id),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-colors ${e===t.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[o.jsx("span",{className:"text-lg",children:t.icon}),o.jsx("span",{className:"text-sm font-medium",children:t.name})]},t.id))}),(0,o.jsxs)("div",{className:"game-card",children:["audio"===e&&(0,o.jsxs)("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Audio Settings"}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Master Volume"}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[t.audio.masterVolume,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:t.audio.masterVolume,onChange:e=>r("audio","masterVolume",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Music Volume"}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[t.audio.musicVolume,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:t.audio.musicVolume,onChange:e=>r("audio","musicVolume",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:!t.audio.enableMusic})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sound Effects Volume"}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[t.audio.sfxVolume,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:t.audio.sfxVolume,onChange:e=>r("audio","sfxVolume",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",disabled:!t.audio.enableSFX})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:t.audio.enableMusic,onChange:e=>r("audio","enableMusic",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Enable Music"})]}),(0,o.jsxs)("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:t.audio.enableSFX,onChange:e=>r("audio","enableSFX",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Enable Sound Effects"})]})]})]}),"gameplay"===e&&(0,o.jsxs)("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Gameplay Settings"}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Game Difficulty"}),(0,o.jsxs)("select",{value:t.gameplay.difficulty,onChange:e=>r("gameplay","difficulty",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"easy",children:"Easy - More forgiving, slower progression"}),o.jsx("option",{value:"normal",children:"Normal - Balanced challenge"}),o.jsx("option",{value:"hard",children:"Hard - Challenging, faster progression"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Game Speed"}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[t.gameplay.timeScale,"x"]})]}),o.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.5",value:t.gameplay.timeScale,onChange:e=>r("gameplay","timeScale",parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:t.gameplay.autoSave,onChange:e=>r("gameplay","autoSave",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Enable Auto-Save"})]}),t.gameplay.autoSave&&(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto-Save Interval (minutes)"}),(0,o.jsxs)("select",{value:t.gameplay.autoSaveInterval,onChange:e=>r("gameplay","autoSaveInterval",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"1",children:"Every minute"}),o.jsx("option",{value:"5",children:"Every 5 minutes"}),o.jsx("option",{value:"10",children:"Every 10 minutes"}),o.jsx("option",{value:"30",children:"Every 30 minutes"})]})]})]}),(0,o.jsxs)("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:t.gameplay.showTutorials,onChange:e=>r("gameplay","showTutorials",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Show Tutorials and Tips"})]})]}),"display"===e&&(0,o.jsxs)("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Display Settings"}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,o.jsxs)("select",{value:t.display.theme,onChange:e=>r("display","theme",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"light",children:"Light Theme"}),o.jsx("option",{value:"dark",children:"Dark Theme"}),o.jsx("option",{value:"auto",children:"Auto (Follow System)"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,o.jsxs)("select",{value:t.display.fontSize,onChange:e=>r("display","fontSize",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"small",children:"Small"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"large",children:"Large"})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:t.display.showAnimations,onChange:e=>r("display","showAnimations",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Show Animations"})]}),(0,o.jsxs)("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:t.display.showNotifications,onChange:e=>r("display","showNotifications",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Show Notifications"})]})]})]}),"business"===e&&(0,o.jsxs)("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Business Settings"}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Cash"}),o.jsx("input",{type:"number",min:"500",max:"10000",step:"100",value:t.business.startingCash,onChange:e=>r("business","startingCash",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Amount of money you start with"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Customer Satisfaction Threshold"}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[t.business.customerSatisfactionThreshold,"%"]})]}),o.jsx("input",{type:"range",min:"30",max:"90",value:t.business.customerSatisfactionThreshold,onChange:e=>r("business","customerSatisfactionThreshold",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum satisfaction to retain customers"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Customers"}),o.jsx("input",{type:"number",min:"20",max:"500",step:"10",value:t.business.maxCustomers,onChange:e=>r("business","maxCustomers",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of customers you can serve"})]}),(0,o.jsxs)("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:t.business.enableEvents,onChange:e=>r("business","enableEvents",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Enable Random Events"})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Weather, special requests, and other random events"})]})]}),(0,o.jsxs)("div",{className:"game-card",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Additional Options"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("button",{className:"px-4 py-2 text-sm bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"\uD83D\uDCC1 Export Save Data"}),o.jsx("button",{className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"\uD83D\uDCE5 Import Save Data"}),o.jsx("button",{className:"px-4 py-2 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:"\uD83C\uDFAF Reset Progress"}),o.jsx("button",{className:"px-4 py-2 text-sm bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",children:"\uD83D\uDCCA View Statistics"})]})]})]})}function B(){let[e,s]=(0,m.useState)([]),[t,a]=(0,m.useState)([]),[r,l]=(0,m.useState)(!1),[i,n]=(0,m.useState)(!1),[c,d]=(0,m.useState)(0);(0,m.useEffect)(()=>{let e=[{id:"1",type:"success",title:"Customer Acquired!",message:'New customer "Smith Family" has signed up for weekly service.',timestamp:new Date(Date.now()-3e5),read:!1,action:{label:"View Customer",onClick:()=>console.log("View customer clicked")}},{id:"2",type:"warning",title:"Low Supplies",message:"You are running low on cleaning supplies. Consider restocking soon.",timestamp:new Date(Date.now()-18e5),read:!1,action:{label:"Buy Supplies",onClick:()=>console.log("Buy supplies clicked")}},{id:"3",type:"info",title:"Daily Summary",message:"You completed 15 jobs today with 95% customer satisfaction.",timestamp:new Date(Date.now()-72e5),read:!0}],t=[{id:"1",type:"weather",title:"Rainy Weather",description:"Heavy rain expected today. Service times may be longer.",icon:"\uD83C\uDF27️",severity:"medium",timestamp:new Date},{id:"2",type:"customer",title:"Special Request",description:'Customer "Johnson" requests extra attention to their garden area.',icon:"\uD83C\uDFAF",severity:"low",timestamp:new Date(Date.now()-9e5)},{id:"3",type:"achievement",title:"Milestone Reached!",description:"Congratulations! You've served 100 customers.",icon:"\uD83C\uDFC6",severity:"high",timestamp:new Date(Date.now()-27e5)}];s(e),a(t),d(e.filter(e=>!e.read).length)},[]);let u=e=>{s(s=>s.map(s=>s.id===e?{...s,read:!0}:s)),d(e=>Math.max(0,e-1))},x=t=>{s(e=>e.filter(e=>e.id!==t)),d(s=>{let a=e.find(e=>e.id===t);return a&&!a.read?Math.max(0,s-1):s})},h=e=>{switch(e){case"success":return"✅";case"warning":return"⚠️";case"error":return"❌";case"info":return"ℹ️";case"event":return"\uD83C\uDF89";default:return"\uD83D\uDCE2"}},g=e=>{switch(e){case"success":return"border-green-200 bg-green-50";case"warning":return"border-yellow-200 bg-yellow-50";case"error":return"border-red-200 bg-red-50";case"info":return"border-blue-200 bg-blue-50";case"event":return"border-purple-200 bg-purple-50";default:return"border-gray-200 bg-gray-50"}},p=e=>{switch(e){case"low":return"border-green-200 bg-green-50";case"medium":return"border-yellow-200 bg-yellow-50";case"high":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}},f=e=>{let s=new Date().getTime()-e.getTime(),t=Math.floor(s/6e4),a=Math.floor(s/36e5);return t<1?"Just now":t<60?`${t}m ago`:a<24?`${a}h ago`:`${Math.floor(s/864e5)}d ago`};return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("button",{onClick:()=>l(!r),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[o.jsx("span",{className:"text-2xl",children:"\uD83D\uDD14"}),c>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:c>99?"99+":c})]}),r&&(0,o.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[o.jsx("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Notifications"}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>{s(e=>e.map(e=>({...e,read:!0}))),d(0)},className:"text-xs text-blue-600 hover:text-blue-800",children:"Mark all read"}),o.jsx("button",{onClick:()=>l(!1),className:"text-xs text-gray-500 hover:text-gray-700",children:"✕"})]})]})}),o.jsx("div",{className:"p-2",children:0===e.length?(0,o.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("div",{className:"text-3xl mb-2",children:"\uD83D\uDD15"}),o.jsx("p",{children:"No notifications"})]}):o.jsx("div",{className:"space-y-2",children:e.map(e=>o.jsx("div",{className:`p-3 rounded-lg border ${g(e.type)} ${e.read?"":"ring-2 ring-blue-300"}`,children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[o.jsx("span",{className:"text-lg",children:h(e.type)}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[o.jsx("h4",{className:"font-medium text-gray-800 text-sm",children:e.title}),o.jsx("button",{onClick:()=>x(e.id),className:"text-gray-400 hover:text-gray-600 text-xs",children:"✕"})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:f(e.timestamp)}),e.action&&o.jsx("button",{onClick:()=>{e.action?.onClick(),u(e.id)},className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:e.action.label})]})]})]})},e.id))})})]})]}),o.jsx("button",{onClick:()=>n(!i),className:"ml-2 p-2 text-gray-600 hover:text-gray-800 transition-colors",children:o.jsx("span",{className:"text-2xl",children:"\uD83D\uDCC5"})}),i&&(0,o.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[o.jsx("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Game Events"}),o.jsx("button",{onClick:()=>n(!1),className:"text-xs text-gray-500 hover:text-gray-700",children:"✕"})]})}),o.jsx("div",{className:"p-2",children:0===t.length?(0,o.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("div",{className:"text-3xl mb-2",children:"\uD83D\uDCC5"}),o.jsx("p",{children:"No active events"})]}):o.jsx("div",{className:"space-y-2",children:t.map(e=>o.jsx("div",{className:`p-3 rounded-lg border ${p(e.severity)}`,children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[o.jsx("span",{className:"text-2xl",children:e.icon}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[o.jsx("h4",{className:"font-medium text-gray-800 text-sm",children:e.title}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${"high"===e.severity?"bg-red-100 text-red-800":"medium"===e.severity?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:e.severity})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),o.jsx("div",{className:"mt-2",children:o.jsx("span",{className:"text-xs text-gray-500",children:f(e.timestamp)})})]})]})},e.id))})})]}),(r||i)&&o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{l(!1),n(!1)}})]})}function W({onClose:e}){var s,t;let{day:a,cash:r,dailyEarnings:l,totalCustomers:i,customerSatisfaction:n,houses:c}=I(),d=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["Day ",a," Complete!"]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx("span",{className:"text-2xl",children:"\xd7"})})]}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Great work today! Here's your summary:"})]}),(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCB0"}),o.jsx("div",{className:"text-lg font-bold text-green-700",children:d(l||0)}),o.jsx("div",{className:"text-xs text-green-600",children:"Today's Earnings"})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl mb-1",children:"\uD83C\uDFE0"}),o.jsx("div",{className:"text-lg font-bold text-blue-700",children:c.filter(e=>e.serviced).length}),o.jsx("div",{className:"text-xs text-blue-600",children:"Houses Serviced"})]})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[o.jsx("div",{className:"text-3xl mb-2",children:(s=n||0)>=80?"\uD83D\uDE0A":s>=60?"\uD83D\uDE10":"\uD83D\uDE1E"}),(0,o.jsxs)("div",{className:`text-xl font-bold ${(t=n||0)>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600"}`,children:[`${Math.round(n||0)}%`," Satisfaction"]}),o.jsx("div",{className:"text-sm text-orange-600 mt-1",children:n>=80?"Excellent work!":n>=60?"Good job!":"Room for improvement"})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Total Customers:"}),o.jsx("span",{className:"font-medium",children:i||0})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Current Cash:"}),o.jsx("span",{className:"font-bold text-green-600",children:d(r)})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Day Number:"}),o.jsx("span",{className:"font-medium",children:a})]})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl mb-2",children:"\uD83C\uDFAF"}),o.jsx("div",{className:"text-sm text-purple-700",children:1===a?"Great start to your poopster empire!":a<7?"You're building momentum!":a<30?"You're becoming a poopster pro!":"You're a poopster legend!"})]})]}),o.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:o.jsx("button",{onClick:e,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Continue to Next Day"})})]})})}function Z(){let[e,s]=(0,m.useState)("plan"),[t,a]=(0,m.useState)(!1),{day:r,cash:l,timeLeft:i,isDayActive:n,houses:c,selectedHouses:d,dailyCapacity:u,startDay:x,endDay:h,resetGame:g,customers:p}=I();(0,m.useEffect)(()=>{if(0===c.length){let e=M();I.setState({houses:e})}},[c.length]),(0,m.useEffect)(()=>{if(0===p.length){let e=function(){let e=["Smith Family","Johnson Residence","Williams Home","Brown House","Davis Family","Miller Residence","Wilson Home","Moore House","Taylor Family","Anderson Residence","Thomas Home","Jackson House","White Family","Harris Residence","Martin Home","Thompson House","Garcia Family","Martinez Residence","Robinson Home","Clark House"],s=["Oak Street","Maple Avenue","Pine Road","Elm Street","Cedar Lane","Birch Drive","Willow Way","Cherry Street","Magnolia Avenue","Sycamore Road","Poplar Street","Hickory Lane","Walnut Drive","Chestnut Way","Ash Street","Beech Avenue","Spruce Road","Fir Street","Hemlock Lane","Cypress Drive"],t=[];for(let a=0;a<Math.min(20,e.length);a++){let r=.3>Math.random()?"LARGE":.5>Math.random()?"MEDIUM":"SMALL",l=Math.floor(40*Math.random())+60,i=.8>Math.random()?"active":.5>Math.random()?"pending":"overdue",n=new Date,c=new Date(n.getTime()-2592e6*Math.random()),d=new Date(n.getTime()+12096e5*Math.random());t.push({id:`customer_${a}`,name:e[a],address:`${Math.floor(9999*Math.random())+1} ${s[a]}`,tier:r,lastService:c.toISOString(),nextService:d.toISOString(),satisfaction:l,status:i,notes:.3>Math.random()?"Special attention to garden area":""})}return t}();I.setState({customers:e})}},[p.length]),(0,m.useEffect)(()=>{if(r>1&&!n){let e=function(){let e=Math.random();return e<.7?"clear":e<.85?"rain":"heat"}();I.setState({weather:e})}},[r,n]);let f=d.length>0?A(c,d):null;return(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,o.jsxs)("div",{className:"bg-white shadow-lg border-b border-gray-200 p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-6",children:[o.jsx("h1",{className:"text-2xl font-game text-primary-600",children:"Poopster"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:["Day ",r]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["$",l.toLocaleString()]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Cash"})]}),n&&(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[Math.max(0,i).toFixed(1),"h"]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Time Left"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[d.length,"/",u]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Route"})]}),o.jsx(B,{})]})]}),f&&!n&&o.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,o.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"font-medium text-blue-800",children:"Route Preview:"}),(0,o.jsxs)("div",{className:"flex space-x-4 text-blue-700",children:[(0,o.jsxs)("span",{children:["Revenue: $",f.totalRevenue]}),(0,o.jsxs)("span",{children:["Time: ",f.totalTime.toFixed(1),"h"]}),(0,o.jsxs)("span",{children:["Fuel: $",Math.round(f.totalFuel)]})]})]})})]}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row",children:[o.jsx("div",{className:"lg:w-2/3 h-96 lg:h-auto",children:o.jsx(k,{})}),(0,o.jsxs)("div",{className:"lg:w-1/3 bg-white border-l border-gray-200 flex flex-col",children:[o.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[{id:"plan",name:"Plan",icon:"\uD83D\uDCCB"},{id:"route",name:"Route",icon:"\uD83D\uDDFA️"},{id:"upgrades",name:"Upgrades",icon:"⚡"},{id:"reports",name:"Reports",icon:"\uD83D\uDCCA"},{id:"settings",name:"Settings",icon:"⚙️"}].map(t=>(0,o.jsxs)("button",{onClick:()=>s(t.id),className:`flex items-center space-x-2 px-3 py-3 text-sm font-medium transition-colors ${e===t.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[o.jsx("span",{className:"text-lg",children:t.icon}),o.jsx("span",{className:"hidden sm:inline",children:t.name})]},t.id))}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto",children:["plan"===e&&o.jsx(L,{onStartDay:()=>{0!==d.length&&(x(),s("route"))},canStartDay:d.length>0&&!n}),"route"===e&&o.jsx(P,{onEndDay:()=>{h(),a(!0),s("plan")},canEndDay:n}),"upgrades"===e&&o.jsx(H,{}),"reports"===e&&o.jsx(G,{}),"settings"===e&&o.jsx(U,{})]})]})]}),o.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("button",{onClick:()=>{if(confirm("Are you sure you want to reset your game? This cannot be undone.")){g();let e=M();I.setState({houses:e})}},className:"text-sm text-gray-500 hover:text-red-600 transition-colors",children:"Reset Game"}),o.jsx("div",{className:"text-xs text-gray-400",children:"Poopster v1.0 - Build your poop empire!"})]})}),t&&o.jsx(W,{onClose:()=>a(!1)})]})}function V(){return o.jsx(Z,{})}},2295:(e,s,t)=>{"use strict";e.exports=t(6372).vendored["react-ssr"].ReactJsxRuntime},80:(e,s,t)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=t(3729);"function"==typeof Object.is&&Object.is,a.useState,a.useEffect,a.useLayoutEffect,a.useDebugValue,s.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:function(e,s){return s()}},7986:(e,s,t)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=t(3729),r=t(8145),l="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},i=r.useSyncExternalStore,n=a.useRef,c=a.useEffect,d=a.useMemo,o=a.useDebugValue;s.useSyncExternalStoreWithSelector=function(e,s,t,a,r){var m=n(null);if(null===m.current){var u={hasValue:!1,value:null};m.current=u}else u=m.current;var x=i(e,(m=d(function(){function e(e){if(!c){if(c=!0,i=e,e=a(e),void 0!==r&&u.hasValue){var s=u.value;if(r(s,e))return n=s}return n=e}if(s=n,l(i,e))return s;var t=a(e);return void 0!==r&&r(s,t)?(i=e,s):(i=e,n=t)}var i,n,c=!1,d=void 0===t?null:t;return[function(){return e(s())},null===d?void 0:function(){return e(d())}]},[s,t,a,r]))[0],m[1]);return c(function(){u.hasValue=!0,u.value=x},[x]),o(x),x}},8145:(e,s,t)=>{"use strict";e.exports=t(80)},4657:(e,s,t)=>{"use strict";e.exports=t(7986)},2917:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>r});var a=t(5036);t(7272);let r={title:"Poopster - Poop Empire Tycoon",description:"Build your poop-scooping empire! Manage routes, upgrade your business, and become the neighborhood's top poopster.",viewport:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",themeColor:"#f2751a"};function l({children:e}){return(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsxs)("head",{children:[a.jsx("link",{rel:"manifest",href:"/manifest.json"}),a.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),a.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),a.jsx("meta",{name:"apple-mobile-web-app-title",content:"Poopster"}),a.jsx("link",{rel:"apple-touch-icon",href:"/icon-192x192.png"})]}),a.jsx("body",{children:e})]})}},751:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,t(6843).createProxy)(String.raw`C:\Users\danog\Desktop\code\poopstergame\app\page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default},7272:()=>{}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[73],()=>t(2798));module.exports=a})();